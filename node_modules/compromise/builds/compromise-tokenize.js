!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).nlp=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");var l=function(t){for(var e=(t=t||"_")+"-",r=0;r<7;r++)e+=c[Math.floor(Math.random()*c.length)];return e},h={"!":"¡","?":"¿Ɂ",'"':'“”"❝❞',"'":"‘‛❛❜","-":"—–",a:"ªÀÁÂÃÄÅàáâãäåĀāĂăĄąǍǎǞǟǠǡǺǻȀȁȂȃȦȧȺΆΑΔΛάαλАадѦѧӐӑӒӓƛɅæ",b:"ßþƀƁƂƃƄƅɃΒβϐϦБВЪЬвъьѢѣҌҍ",c:"¢©ÇçĆćĈĉĊċČčƆƇƈȻȼͻͼͽϲϹϽϾСсєҀҁҪҫ",d:"ÐĎďĐđƉƊȡƋƌǷ",e:"ÈÉÊËèéêëĒēĔĕĖėĘęĚěƎƏƐǝȄȅȆȇȨȩɆɇΈΕΞΣέεξϱϵ϶ЀЁЕЭеѐёҼҽҾҿӖӗӘәӚӛӬӭ",f:"ƑƒϜϝӺӻҒғſ",g:"ĜĝĞğĠġĢģƓǤǥǦǧǴǵ",h:"ĤĥĦħƕǶȞȟΉΗЂЊЋНнђћҢңҤҥҺһӉӊ",I:"ÌÍÎÏ",i:"ìíîïĨĩĪīĬĭĮįİıƖƗȈȉȊȋΊΐΪίιϊІЇії",j:"ĴĵǰȷɈɉϳЈј",k:"ĶķĸƘƙǨǩΚκЌЖКжкќҚқҜҝҞҟҠҡ",l:"ĹĺĻļĽľĿŀŁłƚƪǀǏǐȴȽΙӀӏ",m:"ΜϺϻМмӍӎ",n:"ÑñŃńŅņŇňŉŊŋƝƞǸǹȠȵΝΠήηϞЍИЙЛПийлпѝҊҋӅӆӢӣӤӥπ",o:"ÒÓÔÕÖØðòóôõöøŌōŎŏŐőƟƠơǑǒǪǫǬǭǾǿȌȍȎȏȪȫȬȭȮȯȰȱΌΘΟθοσόϕϘϙϬϭϴОФоѲѳӦӧӨөӪӫ",p:"ƤƿΡρϷϸϼРрҎҏÞ",q:"Ɋɋ",r:"ŔŕŖŗŘřƦȐȑȒȓɌɍЃГЯгяѓҐґ",s:"ŚśŜŝŞşŠšƧƨȘșȿЅѕ",t:"ŢţŤťŦŧƫƬƭƮȚțȶȾΓΤτϮТт",u:"µÙÚÛÜùúûüŨũŪūŬŭŮůŰűŲųƯưƱƲǓǔǕǖǗǘǙǚǛǜȔȕȖȗɄΰμυϋύ",v:"νѴѵѶѷ",w:"ŴŵƜωώϖϢϣШЩшщѡѿ",x:"×ΧχϗϰХхҲҳӼӽӾӿ",y:"ÝýÿŶŷŸƳƴȲȳɎɏΎΥΫγψϒϓϔЎУучўѰѱҮүҰұӮӯӰӱӲӳ",z:"ŹźŻżŽžƩƵƶȤȥɀΖζ"},f={};Object.keys(h).forEach((function(t){h[t].split("").forEach((function(e){f[e]=t}))}));var p=function(t){var e=t.split("");return e.forEach((function(t,r){f[t]&&(e[r]=f[t])})),e.join("")},d=/([A-Z]\.)+[A-Z]?,?$/,g=/^[A-Z]\.,?$/,v=/[A-Z]{2,}('s|,)?$/,m=/([a-z]\.){2,}[a-z]\.?$/,b=function(t){return!0===d.test(t)||(!0===m.test(t)||(!0===g.test(t)||!0===v.test(t)))},y=/[a-z\u00C0-\u00FF] ?\/ ?[a-z\u00C0-\u00FF]/,$=function(t){var e=t=(t=(t=t||"").toLowerCase()).trim();return t=p(t),!0===y.test(t)&&(t=t.replace(/\/.*/,"")),t=(t=(t=(t=(t=(t=(t=t.replace(/^[#@]/,"")).replace(/[,;.!?]+$/,"")).replace(/[\u0027\u0060\u00B4\u2018\u2019\u201A\u201B\u2032\u2035\u2039\u203A]+/g,"'")).replace(/[\u0022\u00AB\u00BB\u201C\u201D\u201E\u201F\u2033\u2034\u2036\u2037\u2E42\u301D\u301E\u301F\uFF02]+/g,'"')).replace(/\u2026/g,"...")).replace(/\u2013/g,"-")).replace(/([aeiou][ktrp])in$/,"$1ing"),!0===/^(re|un)-?[^aeiou]./.test(t)&&(t=t.replace("-","")),!1===/^[:;]/.test(t)&&(t=(t=(t=t.replace(/\.{3,}$/g,"")).replace(/[",\.!:;\?\)]+$/g,"")).replace(/^['"\(]+/g,"")),""===(t=t.trim())&&(t=e),b(t)&&(t=t.replace(/\./g,"")),t=t.replace(/([0-9]),([0-9])/g,"$1$2")},w=function(t){return t=(t=t.replace(/['’]s$/,"")).replace(/s['’]$/,"s")},A=/^[ \n\t\.’'\[\](){}⟨⟩:,،、‒–—―…!.‹›«»‐\-?‘’;\/⁄·&*•^†‡°¡¿※№÷×ºª%‰+−=‱¶′″‴§~|‖¦©℗®℠™¤₳฿\u0022|\uFF02|\u0027|\u201C|\u2018|\u201F|\u201B|\u201E|\u2E42|\u201A|\u00AB|\u2039|\u2035|\u2036|\u2037|\u301D|\u0060|\u301F]+/,P=/[ \n\t\.’'\[\](){}⟨⟩:,،、‒–—―…!.‹›«»‐\-?‘’;\/⁄·&*@•^†‡°¡¿※#№÷×ºª‰+−=‱¶′″‴§~|‖¦©℗®℠™¤₳฿\u0022|\uFF02|\u0027|\u201D|\u2019|\u201D|\u2019|\u201D|\u201D|\u2019|\u00BB|\u203A|\u2032|\u2033|\u2034|\u301E|\u00B4|\u301E]+$/,x=/\//,k=/['’]/,j=/^[a-z]\.([a-z]\.)+/i,O=/^[-+\.][0-9]/,E=function(t){var e=t,r="",n="";""===(t=(t=t.replace(A,(function(e){return"-"!==(r=e)&&"+"!==r&&"."!==r||!O.test(t)?"":(r="",e)}))).replace(P,(function(i){return n=i,k.test(i)&&/[sn]['’]$/.test(e)&&!1===k.test(r)?(n=n.replace(k,""),"'"):!0===j.test(t)?(n=n.replace(/\./,""),"."):""})))&&(e=e.replace(/ *$/,(function(t){return n=t||"",""})),t=e,r="",n=n);var i=$(t),o={text:t,clean:i,reduced:w(i),pre:r,post:n};return x.test(t)&&t.split(x).forEach((function(t){o.alias=o.alias||{},o.alias[t.trim()]=!0})),o};function C(t,e){return t(e={exports:{}},e.exports),e.exports}var _=C((function(t,e){var r=/^[A-Z][a-z'\u00C0-\u00FF]/,n=/^[A-Z]+s?$/;e.toUpperCase=function(){return this.text=this.text.toUpperCase(),this},e.toLowerCase=function(){return this.text=this.text.toLowerCase(),this},e.toTitleCase=function(){return this.text=this.text.replace(/^ *[a-z\u00C0-\u00FF]/,(function(t){return t.toUpperCase()})),this},e.isUpperCase=function(){return n.test(this.text)},e.isTitleCase=function(){return r.test(this.text)},e.titleCase=e.isTitleCase})),T=(_.toUpperCase,_.toLowerCase,_.toTitleCase,_.isUpperCase,_.isTitleCase,_.titleCase,C((function(t,e){var r=/(\u0022|\uFF02|\u0027|\u201C|\u2018|\u201F|\u201B|\u201E|\u2E42|\u201A|\u00AB|\u2039|\u2035|\u2036|\u2037|\u301D|\u0060|\u301F)/,n=/(\u0022|\uFF02|\u0027|\u201D|\u2019|\u201D|\u2019|\u201D|\u201D|\u2019|\u00BB|\u203A|\u2032|\u2033|\u2034|\u301E|\u00B4|\u301E)/;e.hasPost=function(t){return-1!==this.post.indexOf(t)},e.hasPre=function(t){return-1!==this.pre.indexOf(t)},e.hasQuote=function(){return r.test(this.pre)||n.test(this.post)},e.hasQuotation=e.hasQuote,e.hasComma=function(){return this.hasPost(",")},e.hasPeriod=function(){return!0===this.hasPost(".")&&!1===this.hasPost("...")},e.hasExclamation=function(){return this.hasPost("!")},e.hasQuestionMark=function(){return this.hasPost("?")||this.hasPost("¿")},e.hasEllipses=function(){return this.hasPost("..")||this.hasPost("…")||this.hasPre("..")||this.hasPre("…")},e.hasSemicolon=function(){return this.hasPost(";")},e.hasSlash=function(){return/\//.test(this.text)},e.hasHyphen=function(){var t=/(-|–|—)/;return t.test(this.post)||t.test(this.pre)},e.hasDash=function(){var t=/ (-|–|—) /;return t.test(this.post)||t.test(this.pre)},e.hasContraction=function(){return Boolean(this.implicit)},e.addPunctuation=function(t){return","!==t&&";"!==t||(this.post=this.post.replace(t,"")),this.post=t+this.post,this}}))),F=(T.hasPost,T.hasPre,T.hasQuote,T.hasQuotation,T.hasComma,T.hasPeriod,T.hasExclamation,T.hasQuestionMark,T.hasEllipses,T.hasSemicolon,T.hasSlash,T.hasHyphen,T.hasDash,T.hasContraction,T.addPunctuation,function(){}),N=function(t,e,r,n){return e.id===t.id||(!0===e.anything||(!0!==e.start||0===r)&&((!0!==e.end||r===n-1)&&(void 0!==e.word?null!==t.implicit&&t.implicit===e.word||(!(void 0===t.alias||!t.alias.hasOwnProperty(e.word))||(!0===e.soft&&e.word===t.root||(e.word===t.clean||e.word===t.text||e.word===t.reduced))):void 0!==e.tag?!0===t.tags[e.tag]:void 0!==e.method?"function"==typeof t[e.method]&&!0===t[e.method]():void 0!==e.regex?e.regex.test(t.clean):void 0!==e.oneOf?e.oneOf.hasOwnProperty(t.reduced)||e.oneOf.hasOwnProperty(t.text):void 0!==e.choices&&("and"===e.operator?e.choices.every((function(e){return F(t,e,r,n)})):e.choices.some((function(e){return F(t,e,r,n)}))))))},V=F=function(t,e,r,n){var i=N(t,e,r,n);return!0===e.negative?!i:i},S={},z={doesMatch:function(t,e,r){return V(this,t,e,r)},isAcronym:function(){return b(this.text)},isImplicit:function(){return""===this.text&&Boolean(this.implicit)},isKnown:function(){return Object.keys(this.tags).some((function(t){return!0!==S[t]}))},setRoot:function(t){var e=t.transforms,r=this.implicit||this.clean;if(this.tags.Plural&&(r=e.toSingular(r,t)),this.tags.Verb&&!this.tags.Negative&&!this.tags.Infinitive){var n=null;this.tags.PastTense?n="PastTense":this.tags.Gerund?n="Gerund":this.tags.PresentTense?n="PresentTense":this.tags.Participle?n="Participle":this.tags.Actor&&(n="Actor"),r=e.toInfinitive(r,t,n)}this.root=r}},B=/[\s-]/,D=/^[A-Z-]+$/,q={textOut:function(t,e,r){t=t||{};var n=this.text,i=this.pre,o=this.post;return!0===t.reduced&&(n=this.reduced||""),!0===t.root&&(n=this.root||""),!0===t.implicit&&this.implicit&&(n=this.implicit||""),!0===t.normal&&(n=this.clean||this.text||""),!0===t.root&&(n=this.root||this.reduced||""),!0===t.unicode&&(n=p(n)),!0===t.titlecase&&(this.tags.ProperNoun&&!this.titleCase()||(this.tags.Acronym?n=n.toUpperCase():D.test(n)&&!this.tags.Acronym&&(n=n.toLowerCase()))),!0===t.lowercase&&(n=n.toLowerCase()),!0===t.acronyms&&this.tags.Acronym&&(n=n.replace(/\./g,"")),!0!==t.whitespace&&!0!==t.root||(i="",o=" ",!1!==B.test(this.post)&&!t.last||this.implicit||(o="")),!0!==t.punctuation||t.root||(!0===this.hasPost(".")?o="."+o:!0===this.hasPost("?")?o="?"+o:!0===this.hasPost("!")?o="!"+o:!0===this.hasPost(",")?o=","+o:!0===this.hasEllipses()&&(o="..."+o)),!0!==e&&(i=""),!0!==r&&(o=""),!0===t.abbreviations&&this.tags.Abbreviation&&(o=o.replace(/^\./,"")),i+n+o}},I={Auxiliary:1,Possessive:1},L=function(t,e){var r=Object.keys(t.tags),n=e.tags;return r=r.sort((function(t,e){return I[e]||!n[e]?-1:n[e]?n[t]?n[t].lineage.length>n[e].lineage.length?1:n[t].isA.length>n[e].isA.length?-1:0:0:1}))},M={text:!0,tags:!0,implicit:!0,whitespace:!0,clean:!1,id:!1,index:!1,offset:!1,bestTag:!1},W={json:function(t,e){t=t||{};var r={};return(t=Object.assign({},M,t)).text&&(r.text=this.text),t.normal&&(r.normal=this.normal),t.tags&&(r.tags=Object.keys(this.tags)),t.clean&&(r.clean=this.clean),(t.id||t.offset)&&(r.id=this.id),t.implicit&&null!==this.implicit&&(r.implicit=this.implicit),t.whitespace&&(r.pre=this.pre,r.post=this.post),t.bestTag&&(r.bestTag=L(this,e)[0]),r}},G=Object.assign({},_,T,z,q,W);function H(){return"undefined"!=typeof window&&window.document}var U=function(t,e){for(t=t.toString();t.length<e;)t+=" ";return t},Q=function(t,e,r){if(H())console.log("%c"+U(t.clean,3)+"  + "+e+" ","color: #6accb2;");else{var n="[33m"+U(t.clean,15)+"[0m + [32m"+e+"[0m ";r&&(n=U(n,35)+" "+r),console.log(n)}},R=function(t,e,r){if(H())console.log("%c"+U(t.clean,3)+"  - "+e+" ","color: #AB5850;");else{var n="[33m"+U(t.clean,3)+" [31m - #"+e+"[0m ";r&&(n=U(n,35)+" "+r),console.log(n)}},Z=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},J=function(t,e,r,n){var i=n.tags;if(""!==e&&"."!==e&&"-"!==e&&("#"===e[0]&&(e=e.replace(/^#/,"")),e=Z(e),!0!==t.tags[e])){var o=n.isVerbose();!0===o&&Q(t,e,r),t.tags[e]=!0,!0===i.hasOwnProperty(e)&&(i[e].isA.forEach((function(e){t.tags[e]=!0,!0===o&&Q(t,"→ "+e)})),t.unTag(i[e].notA,"←",n))}},Y=function(t,e,r,n){if("string"!=typeof e)for(var i=0;i<e.length;i++)J(t,e[i],r,n);else J(t,e,r,n)},K=function(t,e,r,n){var i=n.isVerbose();if("*"===e)return t.tags={},t;!0===t.tags[e]&&(delete t.tags[e],!0===i&&R(t,e,r));var o=n.tags;if(o[e])for(var s=o[e].lineage,a=0;a<s.length;a++)!0===t.tags[s[a]]&&(delete t.tags[s[a]],!0===i&&R(t," - "+s[a]));return t},X=function(t,e,r,n){if("string"!=typeof e&&e)for(var i=0;i<e.length;i++)K(t,e[i],r,n);else K(t,e,r,n)},tt=function t(e,r,n){var i=n.tags;if("#"===r[0]&&(r=r.replace(/^#/,"")),void 0===i[r])return!0;for(var o=i[r].notA||[],s=0;s<o.length;s++)if(!0===e.tags[o[s]])return!1;return void 0===i[r].isA||t(e,i[r].isA,n)},et={tag:function(t,e,r){return Y(this,t,e,r),this},tagSafe:function(t,e,r){return tt(this,t,r)&&Y(this,t,e,r),this},unTag:function(t,e,r){return X(this,t,e,r),this},canBe:function(t,e){return tt(this,t,e)}},rt=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e(this,t),r=String(r);var n=E(r);this.text=n.text||"",this.clean=n.clean,this.reduced=n.reduced,this.root=null,this.implicit=null,this.pre=n.pre||"",this.post=n.post||"",this.tags={},this.prev=null,this.next=null,this.id=l(n.clean),this.isA="Term",n.alias&&(this.alias=n.alias)}return n(t,[{key:"set",value:function(t){var e=E(t);return this.text=e.text,this.clean=e.clean,this}}]),t}();rt.prototype.clone=function(){var t=new rt(this.text);return t.pre=this.pre,t.post=this.post,t.tags=Object.assign({},this.tags),t},Object.assign(rt.prototype,G),Object.assign(rt.prototype,et);var nt=rt,it={terms:function(t){if(0===this.length)return[];if(this.cache.terms)return void 0!==t?this.cache.terms[t]:this.cache.terms;for(var e=[this.pool.get(this.start)],r=0;r<this.length-1;r+=1){var n=e[e.length-1].next;if(null===n){console.error("Compromise error: Linked list broken in phrase '"+this.start+"'");break}var i=this.pool.get(n);if(e.push(i),void 0!==t&&t===r)return e[t]}return void 0===t&&(this.cache.terms=e),void 0!==t?e[t]:e},clone:function(t){var e=this;if(t){var r=this.buildFrom(this.start,this.length);return r.cache=this.cache,r}var n=this.terms().map((function(t){return t.clone()}));return n.forEach((function(t,r){e.pool.add(t),n[r+1]&&(t.next=n[r+1].id),n[r-1]&&(t.prev=n[r-1].id)})),this.buildFrom(n[0].id,n.length)},lastTerm:function(){var t=this.terms();return t[t.length-1]},hasId:function(t){if(0===this.length||!t)return!1;if(this.start===t)return!0;if(this.cache.terms){for(var e=this.cache.terms,r=0;r<e.length;r++)if(e[r].id===t)return!0;return!1}for(var n=this.start,i=0;i<this.length-1;i+=1){var o=this.pool.get(n);if(void 0===o)return console.error("Compromise error: Linked list broken. Missing term '".concat(n,"' in phrase '").concat(this.start,"'\n")),!1;if(o.next===t)return!0;n=o.next}return!1},wordCount:function(){return this.terms().filter((function(t){return""!==t.text})).length},fullSentence:function(){for(var t=this.terms(0);t.prev;)t=this.pool.get(t.prev);for(var e=t.id,r=1;t.next;)t=this.pool.get(t.next),r+=1;return this.buildFrom(e,r)}},ot=function(t){return t.replace(/ +$/,"")},st={text:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;"string"==typeof t&&(t="normal"===t?{whitespace:!0,unicode:!0,lowercase:!0,punctuation:!0,acronyms:!0,abbreviations:!0,implicit:!0,normal:!0}:"clean"===t?{titlecase:!1,lowercase:!0,punctuation:!0,whitespace:!0,unicode:!0,implicit:!0}:"reduced"===t?{titlecase:!1,lowercase:!0,punctuation:!1,whitespace:!0,unicode:!0,implicit:!0,reduced:!0}:"root"===t?{titlecase:!1,lowercase:!0,punctuation:!0,whitespace:!0,unicode:!0,implicit:!0,root:!0}:{});var n=this.terms(),i=!1;n[0]&&null===n[0].prev&&null===n[n.length-1].next&&(i=!0);var o=n.reduce((function(o,s,a){t.last=r&&a===n.length-1;var u=!0,c=!0;return!1===i&&(0===a&&e&&(u=!1),a===n.length-1&&r&&(c=!1)),o+s.textOut(t,u,c)}),"");return!0===i&&r&&(o=ot(o)),!0===t.trim&&(o=o.trim()),o}},at={trim:function(){var t=this.terms();if(t.length>0){t[0].pre=t[0].pre.replace(/^\s+/,"");var e=t[t.length-1];e.post=e.post.replace(/\s+$/,"")}return this}},ut=/[.?!]\s*$/,ct=function(t,e){e[0].pre=t[0].pre;var r,n,i=t[t.length-1],o=e[e.length-1];o.post=(r=i.post,n=o.post,ut.test(n)?n+r.match(/\s*$/):r),i.post="",""===i.post&&(i.post+=" ")},lt=function(t,e,r){var n=t.terms(),i=e.terms();ct(n,i),function(t,e,r){var n=t[t.length-1],i=e[e.length-1],o=n.next;(n.next=e[0].id,i.next=o,o)&&(r.get(o).prev=i.id);var s=t[0].id;s&&(e[0].prev=s)}(n,i,t.pool);var o,s=[t],a=t.start,u=[r];return(u=u.concat(r.parents())).forEach((function(t){var e=t.list.filter((function(t){return t.hasId(a)}));s=s.concat(e)})),(s=(o=s).filter((function(t,e){return o.indexOf(t)===e}))).forEach((function(t){t.length+=e.length})),t.cache={},t},ht=/ /,ft=function(t,e,r){var n=t.start,i=e.terms();!function(t){var e=t[t.length-1];!1===ht.test(e.post)&&(e.post+=" ")}(i),function(t,e,r){var n=r[r.length-1];n.next=t.start;var i=t.pool,o=i.get(t.start);o.prev&&(i.get(o.prev).next=e.start);r[0].prev=t.terms(0).prev,t.terms(0).prev=n.id}(t,e,i);var o,s=[t],a=[r];return(a=a.concat(r.parents())).forEach((function(t){var r=t.list.filter((function(t){return t.hasId(n)||t.hasId(e.start)}));s=s.concat(r)})),(s=(o=s).filter((function(t,e){return o.indexOf(t)===e}))).forEach((function(t){t.length+=e.length,t.start===n&&(t.start=e.start),t.cache={}})),t},pt=function(t,e){var r=e.pool(),n=t.terms(),i=r.get(n[0].prev)||{},o=r.get(n[n.length-1].next)||{};n[0].implicit&&i.implicit&&(i.set(i.implicit),i.post+=" "),function(t,e,r,n){var i=t.parents();i.push(t),i.forEach((function(t){var i=t.list.find((function(t){return t.hasId(e)}));i&&(i.length-=r,i.start===e&&(i.start=n.id),i.cache={})})),t.list=t.list.filter((function(t){return!(!t.start||!t.length)}))}(e,t.start,t.length,o),i&&(i.next=o.id),o&&(o.prev=i.id)},dt={append:function(t,e){return lt(this,t,e),this},prepend:function(t,e){return ft(this,t,e),this},delete:function(t){return pt(this,t),this},replace:function(t,e){var r=this.length;lt(this,t,e);var n=this.buildFrom(this.start,this.length);n.length=r,pt(n,e)},splitOn:function(t){var e=this.terms(),r={before:null,match:null,after:null},n=e.findIndex((function(e){return e.id===t.start}));if(-1===n)return r;var i=e.slice(0,n);i.length>0&&(r.before=this.buildFrom(i[0].id,i.length));var o=e.slice(n,n+t.length);o.length>0&&(r.match=this.buildFrom(o[0].id,o.length));var s=e.slice(n+t.length,e.length);return s.length>0&&(r.after=this.buildFrom(s[0].id,s.length,this.pool)),r}},gt={json:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r={};return t.text&&(r.text=this.text()),t.normal&&(r.normal=this.text("normal")),t.clean&&(r.clean=this.text("clean")),t.reduced&&(r.reduced=this.text("reduced")),t.root&&(r.root=this.text("root")),t.trim&&(r.text&&(r.text=r.text.trim()),r.normal&&(r.normal=r.normal.trim()),r.reduced&&(r.reduced=r.reduced.trim())),t.terms&&(!0===t.terms&&(t.terms={}),r.terms=this.terms().map((function(r){return r.json(t.terms,e)}))),r}},vt={lookAhead:function(t){t||(t=".*");var e=this.pool,r=[],n=this.terms();return function t(n){var i=e.get(n);i&&(r.push(i),i.prev&&t(i.next))}(n[n.length-1].next),0===r.length?[]:this.buildFrom(r[0].id,r.length).match(t)},lookBehind:function(t){t||(t=".*");var e=this.pool,r=[];return function t(n){var i=e.get(n);i&&(r.push(i),i.prev&&t(i.prev))}(e.get(this.start).prev),0===r.length?[]:this.buildFrom(r[r.length-1].id,r.length).match(t)}},mt=Object.assign({},it,st,at,dt,gt,vt),bt=function(t,e){if(0===e.length)return!0;for(var r=0;r<e.length;r+=1){var n=e[r];if(!0!==n.optional&&!0!==n.negative&&!0===n.start&&r>0)return!0;if(!0===n.anything&&!0===n.negative)return!0}return!1},yt=function(t,e,r,n,i,o){for(var s=e;e<t.length;e+=1){if(n&&t[e].doesMatch(n,i+e,o))return e;var a=e-s+1;if(void 0!==r.max&&a===r.max)return e;if(!1===t[e].doesMatch(r,i+e,o))return void 0!==r.min&&a<r.min?null:e}return e},$t=function(t,e,r,n,i){if(!r)return t.length;for(;e<t.length;e+=1)if(!0===t[e].doesMatch(r,n+e,i))return e;return null},wt=function(t,e,r,n,i){var o=t[e];if(o)return o;var s=r[n].id;return t[e]={group:String(i),start:s,length:0},t[e]},At=function(t,e,r,n){for(var i={},o=null,s=0,a=0;a<e.length;a+=1){var u=e[a],c="string"==typeof u.named||"number"==typeof u.named,h=null;if(c){var f=e[a-1];f&&f.named===u.named&&o?h=o:o=h=l(u.named)}if(!t[s]){if(!1===e.slice(a).some((function(t){return!t.optional})))break;return[!1,null]}if(!0!==u.anything||!0!==u.greedy){if(!0===u.anything||!0===u.end&&!0===u.greedy&&r+s<n-1&&!0===t[s].doesMatch(Object.assign({},u,{end:!1}),r+s,n)||!0===t[s].doesMatch(u,r+s,n)){var p=s;if(u.optional&&e[a+1]&&!0===t[s].doesMatch(e[a+1],r+s,n)&&(t[s+1]&&!1!==t[s+1].doesMatch(e[a+1],r+s,n)||(a+=1)),s+=1,!0===u.end&&s!==t.length&&!0!==u.greedy)return[!1,null];if(!0===u.greedy){if(null===(s=yt(t,s,Object.assign({},u,{start:!1,end:!1}),e[a+1],r,n)))return[!1,null];if(!0===u.end&&r+s!==n)return[!1,null]}if(c){var d=wt(i,h,t,p,u.named);s>1&&u.greedy?d.length+=s-p:d.length++}}else if(!0!==u.optional){if(!(t[s].isImplicit()&&e[a-1]&&t[s+1]&&t[s+1].doesMatch(u,r+s,n)))return[!1,null];s+=2}}else{var g=$t(t,s,e[a+1],u,r);if(void 0!==u.min&&g-s<u.min)return[!1,null];if(void 0!==u.max&&g-s>u.max){s+=u.max;continue}if(null===g)return[!1,null];c&&(wt(i,h,t,s,u.named).length=g-s),s=g}}return[t.slice(0,s),i]},Pt=function(t,e,r){if(!r||0===r.length)return r;if(e.some((function(t){return t.end}))){var n=t[t.length-1];r=r.filter((function(t){return-1!==t.match.indexOf(n)}))}return r},xt=/\{([0-9]+,?[0-9]*)\}/,kt=/&&/,jt=new RegExp(/^<(\S+)>/),Ot=function(t){return t[t.length-1]},Et=function(t){return t[0]},Ct=function(t){return t.substr(1)},_t=function(t){return t.substr(0,t.length-1)},Tt=function(t){return t=Ct(t),t=_t(t)},Ft=function t(e){for(var r,n={},i=0;i<2;i+=1){if("$"===Ot(e)&&(n.end=!0,e=_t(e)),"^"===Et(e)&&(n.start=!0,e=Ct(e)),("["===Et(e)||"]"===Ot(e))&&(n.named=!0,"["===Et(e)?n.groupType="]"===Ot(e)?"single":"start":n.groupType="end",e=(e=e.replace(/^\[/,"")).replace(/\]$/,""),"<"===Et(e))){var o=jt.exec(e);o.length>=2&&(n.named=o[1],e=e.replace(o[0],""))}if("+"===Ot(e)&&(n.greedy=!0,e=_t(e)),"*"!==e&&"*"===Ot(e)&&"\\*"!==e&&(n.greedy=!0,e=_t(e)),"?"===Ot(e)&&(n.optional=!0,e=_t(e)),"!"===Et(e)&&(n.negative=!0,e=Ct(e)),"("===Et(e)&&")"===Ot(e)){kt.test(e)?(n.choices=e.split(kt),n.operator="and"):(n.choices=e.split("|"),n.operator="or"),n.choices[0]=Ct(n.choices[0]);var s=n.choices.length-1;n.choices[s]=_t(n.choices[s]),n.choices=n.choices.map((function(t){return t.trim()})),n.choices=n.choices.filter((function(t){return t})),n.choices=n.choices.map(t),e=""}if("/"===Et(e)&&"/"===Ot(e))return e=Tt(e),n.regex=new RegExp(e),n;if("~"===Et(e)&&"~"===Ot(e))return e=Tt(e),n.soft=!0,n.word=e,n}return!0===xt.test(e)&&(e=e.replace(xt,(function(t,e){var r=e.split(/,/g);return 1===r.length?(n.min=Number(r[0]),n.max=Number(r[0])):(n.min=Number(r[0]),n.max=Number(r[1]||999)),n.greedy=!0,""}))),"#"===Et(e)?(n.tag=Ct(e),n.tag=(r=n.tag).charAt(0).toUpperCase()+r.substr(1),n):"@"===Et(e)?(n.method=Ct(e),n):"."===e?(n.anything=!0,n):"*"===e?(n.anything=!0,n.greedy=!0,n.optional=!0,n):(e&&(e=(e=e.replace("\\*","*")).replace("\\.","."),n.word=e.toLowerCase()),n)},Nt=function(t){return t.filter((function(t){return t.groupType})).length>0&&(t=function(t){for(var e,r,n=!1,i=-1,o=0;o<t.length;o++){var s=t[o];"single"!==s.groupType||!0!==s.named?("start"===s.groupType&&(n=!0,e="string"==typeof(r=s.named)||"number"==typeof r?s.named:i+=1),n&&(s.named=e),"end"===s.groupType&&(n=!1)):(i+=1,s.named=i)}return t}(t)),t=function(t){return t.map((function(t){if(void 0!==t.choices&&!0===t.choices.every((function(t){return!0!==t.optional&&!0!==t.negative&&void 0!==t.word}))){var e={};t.choices.forEach((function(t){return e[t.word]=!0})),t.oneOf=e,delete t.choices}return t}))}(t)},Vt=function(e){if(null==e||""===e)return[];if("object"===t(e)){if(function(t){return"[object Array]"===Object.prototype.toString.call(t)}(e)){if(0===e.length||!e[0])return[];if("object"===t(e[0]))return e;if("string"==typeof e[0])return function(t){return[{choices:t.map((function(t){return{word:t}}))}]}(e)}return e&&"Doc"===e.isA?function(t){if(!t||!t.list||!t.list[0])return[];var e=[];return t.list.forEach((function(t){t.terms().forEach((function(t){e.push({id:t.id})}))})),[{choices:e,greedy:!0}]}(e):[]}"number"==typeof e&&(e=String(e));var r=function(t){var e=t.split(/([\^\[\!]*(?:<\S+>)?\(.*?\)[?+*]*\]?\$?)/);return e=e.map((function(t){return t.trim()}))}(e);return r=(r=function(t){var e=[];return t.forEach((function(t){if(/^[[^_/]?\(/.test(t[0]))e.push(t);else{var r=t.split(" ");r=r.filter((function(t){return t})),e=e.concat(r)}})),e}(r)).map(Ft),r=Nt(r)},St=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof e&&(e=Vt(e)),!0===bt(t,e))return[];var n=e.filter((function(t){return!0!==t.optional})).length,i=t.terms(),o=[];if(!0===e[0].start){var s=At(i,e,0,i.length),a=u(s,2),c=a[0],l=a[1];return!1!==c&&c.length>0&&(c=c.filter((function(t){return t})),o.push({match:c,groups:l})),Pt(i,e,o)}for(var h=0;h<i.length&&!(h+n>i.length);h+=1){var f=At(i.slice(h),e,h,i.length),p=u(f,2),d=p[0],g=p[1];if(!1!==d&&d.length>0&&(h+=d.length-1,d=d.filter((function(t){return t})),o.push({match:d,groups:g}),!0===r))return Pt(i,e,o)}return Pt(i,e,o)},zt=function(t,e){var r={};St(t,e).forEach((function(t){t.match.forEach((function(t){r[t.id]=!0}))}));var n=t.terms(),i=[],o=[];return n.forEach((function(t){!0!==r[t.id]?o.push(t):o.length>0&&(i.push(o),o=[])})),o.length>0&&i.push(o),i},Bt={match:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=St(this,t,r);return n=n.map((function(t){var r=t.match,n=t.groups,i=e.buildFrom(r[0].id,r.length,n);return i.cache.terms=r,i}))},has:function(t){return St(this,t,!0).length>0},not:function(t){var e=this,r=zt(this,t);return r=r.map((function(t){return e.buildFrom(t[0].id,t.length)}))},canBe:function(t,e){for(var r=this,n=[],i=this.terms(),o=!1,s=0;s<i.length;s+=1){var a=i[s].canBe(t,e);!0===a&&(!0===o?n[n.length-1].push(i[s]):n.push([i[s]]),o=a)}return n=n.filter((function(t){return t.length>0})).map((function(t){return r.buildFrom(t[0].id,t.length)}))}},Dt=function t(r,n,i){e(this,t),this.start=r,this.length=n,this.isA="Phrase",Object.defineProperty(this,"pool",{enumerable:!1,writable:!0,value:i}),Object.defineProperty(this,"cache",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"groups",{enumerable:!1,writable:!0,value:{}})};Dt.prototype.buildFrom=function(t,e,r){var n=new Dt(t,e,this.pool);return r&&Object.keys(r).length>0?n.groups=r:n.groups=this.groups,n},Object.assign(Dt.prototype,Bt),Object.assign(Dt.prototype,mt);var qt={term:"terms"};Object.keys(qt).forEach((function(t){return Dt.prototype[t]=Dt.prototype[qt[t]]}));var It=Dt,Lt=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),Object.defineProperty(this,"words",{enumerable:!1,value:r})}return n(t,[{key:"add",value:function(t){return this.words[t.id]=t,this}},{key:"get",value:function(t){return this.words[t]}},{key:"remove",value:function(t){delete this.words[t]}},{key:"merge",value:function(t){return Object.assign(this.words,t.words),this}},{key:"stats",value:function(){return{words:Object.keys(this.words).length}}}]),t}();Lt.prototype.clone=function(){var t=this,e=Object.keys(this.words).reduce((function(e,r){var n=t.words[r].clone();return e[n.id]=n,e}),{});return new Lt(e)};for(var Mt=Lt,Wt=function(t){t.forEach((function(e,r){r>0&&(e.prev=t[r-1].id),t[r+1]&&(e.next=t[r+1].id)}))},Gt=/(\S.+?[.!?\u203D\u2E18\u203C\u2047-\u2049])(?=\s+|$)/g,Ht=/\S/,Ut=/[ .][A-Z]\.? *$/i,Qt=/(?:\u2026|\.{2,}) *$/,Rt=/((?:\r?\n|\r)+)/,Zt=/[a-z0-9\u00C0-\u00FF\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff]/i,Jt=/^\s+/,Yt=function(t,e){if(!0===Ut.test(t))return!1;if(!0===Qt.test(t))return!1;if(!1===Zt.test(t))return!1;var r=t.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),n=r[r.length-1].toLowerCase();return!e.hasOwnProperty(n)},Kt=function(t,e){var r=e.cache.abbreviations;t=t||"";var n=[],i=[];if(!(t=String(t))||"string"!=typeof t||!1===Ht.test(t))return n;for(var o=function(t){for(var e=[],r=t.split(Rt),n=0;n<r.length;n++)for(var i=r[n].split(Gt),o=0;o<i.length;o++)e.push(i[o]);return e}(t),s=0;s<o.length;s++){var a=o[s];if(void 0!==a&&""!==a){if(!1===Ht.test(a)){if(i[i.length-1]){i[i.length-1]+=a;continue}if(o[s+1]){o[s+1]=a+o[s+1];continue}}i.push(a)}}for(var u=0;u<i.length;u++){var c=i[u];i[u+1]&&!1===Yt(c,r)?i[u+1]=c+(i[u+1]||""):c&&c.length>0&&(n.push(c),i[u]="")}if(0===n.length)return[t];for(var l=1;l<n.length;l+=1){var h=n[l].match(Jt);null!==h&&(n[l-1]+=h[0],n[l]=n[l].replace(Jt,""))}return n},Xt=/\S/,te=/^[!?.]+$/,ee=/(\S+)/,re=/\/\W*$/,ne={".":!0,"-":!0,"–":!0,"—":!0,"--":!0,"...":!0},ie=function(t){if(!0===/^(re|un)-?[^aeiou]./.test(t))return!1;return!0===/^([a-z\u00C0-\u00FF`"'/]+)(-|–|—)([a-z0-9\u00C0-\u00FF].*)/i.test(t)},oe=function(t){var e=[],r=t.split(/[-–—]/),n="-",i=t.match(/[-–—]/);i&&i[0]&&(n=i);for(var o=0;o<r.length;o++)o===r.length-1?e.push(r[o]):e.push(r[o]+n);return e},se=function(t){var e=[],r=[];"number"==typeof(t=t||"")&&(t=String(t));for(var n=t.split(ee),i=0;i<n.length;i++)!0!==ie(n[i])?r.push(n[i]):r=r.concat(oe(n[i]));for(var o="",s=0;s<r.length;s++){var a=r[s];!0===Xt.test(a)&&!1===ne.hasOwnProperty(a)&&!1===te.test(a)?(e.length>0?(e[e.length-1]+=o,e.push(a)):e.push(o+a),o=""):o+=a}return o&&(0===e.length&&(e[0]=""),e[e.length-1]+=o),e=(e=function(t){for(var e=1;e<t.length-1;e++)re.test(t[e])&&(t[e-1]+=t[e]+t[e+1],t[e]=null,t[e+1]=null);return t}(e)).filter((function(t){return t}))},ae=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;"string"!=typeof t&&"number"==typeof t&&(t=String(t));var n=Kt(t,e);n=n.map((function(t){return se(t)})),r=r||new Mt;var i=n.map((function(t){t=t.map((function(t){var e=new nt(t);return r.add(e),e})),Wt(t);var e=new It(t[0].id,t.length,r);return e.cache.terms=t,e}));return i},ue=function(t,e){var r=new Mt;return t.map((function(t,n){var i=t.terms.map((function(i,o){var s=new nt(i.text);return s.pre=void 0!==i.pre?i.pre:"",void 0===i.post&&(i.post=" ",o>=t.terms.length-1&&(i.post=". ",n>=t.terms.length-1&&(i.post="."))),s.post=void 0!==i.post?i.post:" ",i.tags&&i.tags.forEach((function(t){return s.tag(t,"",e)})),r.add(s),s}));return Wt(i),new It(i[0].id,i.length,r)}))},ce={},le=["Person","Place","Organization"],he={Noun:{notA:["Verb","Adjective","Adverb"]},Singular:{isA:"Noun",notA:"Plural"},ProperNoun:{isA:"Noun"},Person:{isA:["ProperNoun","Singular"],notA:["Place","Organization","Date"]},FirstName:{isA:"Person"},MaleName:{isA:"FirstName",notA:["FemaleName","LastName"]},FemaleName:{isA:"FirstName",notA:["MaleName","LastName"]},LastName:{isA:"Person",notA:["FirstName"]},NickName:{isA:"Person",notA:["FirstName","LastName"]},Honorific:{isA:"Noun",notA:["FirstName","LastName","Value"]},Place:{isA:"Singular",notA:["Person","Organization"]},Country:{isA:["Place","ProperNoun"],notA:["City"]},City:{isA:["Place","ProperNoun"],notA:["Country"]},Region:{isA:["Place","ProperNoun"]},Address:{isA:"Place"},Organization:{isA:["Singular","ProperNoun"],notA:["Person","Place"]},SportsTeam:{isA:"Organization"},School:{isA:"Organization"},Company:{isA:"Organization"},Plural:{isA:"Noun",notA:["Singular"]},Uncountable:{isA:"Noun"},Pronoun:{isA:"Noun",notA:le},Actor:{isA:"Noun",notA:le},Activity:{isA:"Noun",notA:["Person","Place"]},Unit:{isA:"Noun",notA:le},Demonym:{isA:["Noun","ProperNoun"],notA:le},Possessive:{isA:"Noun"}},fe={Verb:{notA:["Noun","Adjective","Adverb","Value"]},PresentTense:{isA:"Verb",notA:["PastTense","Copula","FutureTense"]},Infinitive:{isA:"PresentTense",notA:["PastTense","Gerund"]},Gerund:{isA:"PresentTense",notA:["PastTense","Copula","FutureTense"]},PastTense:{isA:"Verb",notA:["FutureTense"]},FutureTense:{isA:"Verb"},Copula:{isA:"Verb"},Modal:{isA:"Verb",notA:["Infinitive"]},PerfectTense:{isA:"Verb",notA:"Gerund"},Pluperfect:{isA:"Verb"},Participle:{isA:"Verb"},PhrasalVerb:{isA:"Verb"},Particle:{isA:"PhrasalVerb"}},pe={Value:{notA:["Verb","Adjective","Adverb"]},Ordinal:{isA:"Value",notA:["Cardinal"]},Cardinal:{isA:"Value",notA:["Ordinal"]},RomanNumeral:{isA:"Cardinal",notA:["Ordinal","TextValue"]},TextValue:{isA:"Value",notA:["NumericValue"]},NumericValue:{isA:"Value",notA:["TextValue"]},Money:{isA:"Cardinal"},Percent:{isA:"Value"}},de=["Noun","Verb","Adjective","Adverb","Value","QuestionWord"],ge={Adjective:{notA:["Noun","Verb","Adverb","Value"]},Comparable:{isA:["Adjective"]},Comparative:{isA:["Adjective"]},Superlative:{isA:["Adjective"],notA:["Comparative"]},NumberRange:{isA:["Contraction"]},Adverb:{notA:["Noun","Verb","Adjective","Value"]},Date:{notA:["Verb","Conjunction","Adverb","Preposition","Adjective"]},Month:{isA:["Date","Singular"],notA:["Year","WeekDay","Time"]},WeekDay:{isA:["Date","Noun"]},Time:{isA:["Date"],notA:["Value"]},Determiner:{notA:de},Conjunction:{notA:de},Preposition:{notA:de},QuestionWord:{notA:["Determiner"]},Currency:{},Expression:{notA:["Noun","Adjective","Verb","Adverb"]},Abbreviation:{},Url:{notA:["HashTag","PhoneNumber","Verb","Adjective","Value","AtMention","Email"]},PhoneNumber:{notA:["HashTag","Verb","Adjective","Value","AtMention","Email"]},HashTag:{},AtMention:{isA:["Noun"],notA:["HashTag","Verb","Adjective","Value","Email"]},Emoji:{notA:["HashTag","Verb","Adjective","Value","AtMention"]},Emoticon:{notA:["HashTag","Verb","Adjective","Value","AtMention"]},Email:{notA:["HashTag","Verb","Adjective","Value","AtMention"]},Auxiliary:{notA:["Noun","Adjective","Value"]},Acronym:{notA:["Plural","RomanNumeral"]},Negative:{notA:["Noun","Adjective","Value"]},Condition:{notA:["Verb","Adjective","Noun","Value"]}},ve={Noun:"blue",Verb:"green",Negative:"green",Date:"red",Value:"red",Adjective:"magenta",Preposition:"cyan",Conjunction:"cyan",Determiner:"cyan",Adverb:"cyan"},me=function(t){return Object.keys(t).forEach((function(e){t[e].color?t[e].color=t[e].color:ve[e]?t[e].color=ve[e]:t[e].isA.some((function(r){return!!ve[r]&&(t[e].color=ve[r],!0)}))})),t},be=function(t){return Object.keys(t).forEach((function(e){for(var r=t[e],n=r.isA.length,i=0;i<n;i++){var o=r.isA[i];t[o]&&(r.isA=r.isA.concat(t[o].isA))}r.isA=function(t){return t.filter((function(t,e,r){return r.indexOf(t)===e}))}(r.isA)})),t},ye=function(t){var e=Object.keys(t);return e.forEach((function(r){var n=t[r];n.notA=n.notA||[],n.isA.forEach((function(e){if(t[e]&&t[e].notA){var r="string"==typeof t[e].notA?[t[e].isA]:t[e].notA||[];n.notA=n.notA.concat(r)}}));for(var i=0;i<e.length;i++){var o=e[i];-1!==t[o].notA.indexOf(r)&&n.notA.push(o)}n.notA=function(t){return t.filter((function(t,e,r){return r.indexOf(t)===e}))}(n.notA)})),t},$e=function(t){var e=Object.keys(t);return e.forEach((function(r){var n=t[r];n.lineage=[];for(var i=0;i<e.length;i++)-1!==t[e[i]].isA.indexOf(r)&&n.lineage.push(e[i])})),t},we=function(t){return t=function(t){return Object.keys(t).forEach((function(e){var r=t[e];r.isA=r.isA||[],"string"==typeof r.isA&&(r.isA=[r.isA]),r.notA=r.notA||[],"string"==typeof r.notA&&(r.notA=[r.notA])})),t}(t),t=be(t),t=ye(t),t=me(t),t=$e(t)},Ae=function(t,e){Object.keys(t).forEach((function(r){e[r]=t[r]}))},Pe=function(){var t={};return Ae(he,t),Ae(fe,t),Ae(pe,t),Ae(ge,t),t=we(t)}(),xe=function(t,e,r){void 0!==r[t]?("string"==typeof r[t]&&(r[t]=[r[t]]),"string"==typeof e?r[t].push(e):r[t]=r[t].concat(e)):r[t]=e},ke=xe,je=function(t,e,r){var n=r.words,i=r.transforms,o=t.split(" ");if(o.length>1&&(r.hasCompound[o[0]]=!0),"Singular"===e){var s=i.toPlural(t,r);n[s]=n[s]||"Plural"}if("Infinitive"===e)for(var a=i.conjugate(t,r),u=Object.keys(a),c=0;c<u.length;c++){var l=a[u[c]];n[l]=n[l]||u[c]}if("Comparable"===e)for(var h=i.adjectives(t),f=Object.keys(h),p=0;p<f.length;p++){var d=h[f[p]];n[d]=n[d]||f[p]}if("PhrasalVerb"===e){xe(t,"Infinitive",n);for(var g=i.conjugate(o[0],r),v=Object.keys(g),m=0;m<v.length;m++){r.hasCompound[g[v[m]]]=!0;var b=g[v[m]]+" "+o[1];xe(b,v[m],n),xe(b,"PhrasalVerb",n)}}if("Demonym"===e){var y=i.toPlural(t,r);n[y]=n[y]||["Demonym","Plural"]}},Oe=function(t){for(var e=t.irregulars.nouns,r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];t.words[i]="Singular",t.words[e[i]]="Plural"}for(var o=t.irregulars.verbs,s=Object.keys(o),a=function(e){var r=s[e];t.words[r]=t.words[r]||"Infinitive";var n=t.transforms.conjugate(r,t);n=Object.assign(n,o[r]),Object.keys(n).forEach((function(e){t.words[n[e]]=t.words[n[e]]||e}))},u=0;u<s.length;u++)a(u)},Ee={"20th century fox":"Organization","7 eleven":"Organization","7-eleven":"Organization",g8:"Organization","motel 6":"Organization",vh1:"Organization",q1:"Date",q2:"Date",q3:"Date",q4:"Date"},Ce={g:"Gerund",prt:"Participle",perf:"PerfectTense",pst:"PastTense",fut:"FuturePerfect",pres:"PresentTense",pluperf:"Pluperfect",a:"Actor"},_e={act:{a:"_or"},ache:{pst:"ached",g:"aching"},age:{g:"ageing",pst:"aged",pres:"ages"},aim:{a:"_er",g:"_ing",pst:"_ed"},arise:{prt:"_n",pst:"arose"},babysit:{a:"_ter",pst:"babysat"},ban:{a:"",g:"_ning",pst:"_ned"},be:{a:"",g:"am",prt:"been",pst:"was",pres:"is"},beat:{a:"_er",g:"_ing",prt:"_en"},become:{prt:"_"},begin:{g:"_ning",prt:"begun",pst:"began"},being:{g:"are",pst:"were",pres:"are"},bend:{prt:"bent"},bet:{a:"_ter",prt:"_"},bind:{pst:"bound"},bite:{g:"biting",prt:"bitten",pst:"bit"},bleed:{prt:"bled",pst:"bled"},blow:{prt:"_n",pst:"blew"},boil:{a:"_er"},brake:{prt:"broken"},break:{pst:"broke"},breed:{pst:"bred"},bring:{prt:"brought",pst:"brought"},broadcast:{pst:"_"},budget:{pst:"_ed"},build:{prt:"built",pst:"built"},burn:{prt:"_ed"},burst:{prt:"_"},buy:{prt:"bought",pst:"bought"},can:{a:"",fut:"_",g:"",pst:"could",perf:"could",pluperf:"could",pres:"_"},catch:{pst:"caught"},choose:{g:"choosing",prt:"chosen",pst:"chose"},cling:{prt:"clung"},come:{prt:"_",pst:"came",g:"coming"},compete:{a:"competitor",g:"competing",pst:"_d"},cost:{pst:"_"},creep:{prt:"crept"},cut:{prt:"_"},deal:{prt:"_t",pst:"_t"},develop:{a:"_er",g:"_ing",pst:"_ed"},die:{g:"dying",pst:"_d"},dig:{g:"_ging",prt:"dug",pst:"dug"},dive:{prt:"_d"},do:{pst:"did",pres:"_es"},draw:{prt:"_n",pst:"drew"},dream:{prt:"_t"},drink:{prt:"drunk",pst:"drank"},drive:{g:"driving",prt:"_n",pst:"drove"},drop:{g:"_ping",pst:"_ped"},eat:{a:"_er",g:"_ing",prt:"_en",pst:"ate"},edit:{g:"_ing"},egg:{pst:"_ed"},fall:{prt:"_en",pst:"fell"},feed:{prt:"fed",pst:"fed"},feel:{a:"_er",pst:"felt"},fight:{prt:"fought",pst:"fought"},find:{pst:"found"},flee:{g:"_ing",prt:"fled"},fling:{prt:"flung"},fly:{prt:"flown",pst:"flew"},forbid:{pst:"forbade"},forget:{g:"_ing",prt:"forgotten",pst:"forgot"},forgive:{g:"forgiving",prt:"_n",pst:"forgave"},free:{a:"",g:"_ing"},freeze:{g:"freezing",prt:"frozen",pst:"froze"},get:{pst:"got",prt:"gotten"},give:{g:"giving",prt:"_n",pst:"gave"},go:{prt:"_ne",pst:"went",pres:"goes"},grow:{prt:"_n"},hang:{prt:"hung",pst:"hung"},have:{g:"having",prt:"had",pst:"had",pres:"has"},hear:{prt:"_d",pst:"_d"},hide:{prt:"hidden",pst:"hid"},hit:{prt:"_"},hold:{prt:"held",pst:"held"},hurt:{prt:"_",pst:"_"},ice:{g:"icing",pst:"_d"},imply:{pst:"implied",pres:"implies"},is:{a:"",g:"being",pst:"was",pres:"_"},keep:{prt:"kept"},kneel:{prt:"knelt"},know:{prt:"_n"},lay:{prt:"laid",pst:"laid"},lead:{prt:"led",pst:"led"},leap:{prt:"_t"},leave:{prt:"left",pst:"left"},lend:{prt:"lent"},lie:{g:"lying",pst:"lay"},light:{prt:"lit",pst:"lit"},log:{g:"_ging",pst:"_ged"},loose:{prt:"lost"},lose:{g:"losing",pst:"lost"},make:{prt:"made",pst:"made"},mean:{prt:"_t",pst:"_t"},meet:{a:"_er",g:"_ing",prt:"met",pst:"met"},miss:{pres:"_"},name:{g:"naming"},pay:{prt:"paid",pst:"paid"},prove:{prt:"_n"},puke:{g:"puking"},put:{prt:"_"},quit:{prt:"_"},read:{prt:"_",pst:"_"},ride:{prt:"ridden"},ring:{prt:"rung",pst:"rang"},rise:{fut:"will have _n",g:"rising",prt:"_n",pst:"rose",pluperf:"had _n"},rub:{g:"_bing",pst:"_bed"},run:{g:"_ning",prt:"_",pst:"ran"},say:{prt:"said",pst:"said",pres:"_s"},seat:{prt:"sat"},see:{g:"_ing",prt:"_n",pst:"saw"},seek:{prt:"sought"},sell:{prt:"sold",pst:"sold"},send:{prt:"sent"},set:{prt:"_"},sew:{prt:"_n"},shake:{prt:"_n"},shave:{prt:"_d"},shed:{g:"_ding",pst:"_",pres:"_s"},shine:{prt:"shone",pst:"shone"},shoot:{prt:"shot",pst:"shot"},show:{pst:"_ed"},shut:{prt:"_"},sing:{prt:"sung",pst:"sang"},sink:{pst:"sank",pluperf:"had sunk"},sit:{pst:"sat"},ski:{pst:"_ied"},slay:{prt:"slain"},sleep:{prt:"slept"},slide:{prt:"slid",pst:"slid"},smash:{pres:"_es"},sneak:{prt:"snuck"},speak:{fut:"will have spoken",prt:"spoken",pst:"spoke",perf:"have spoken",pluperf:"had spoken"},speed:{prt:"sped"},spend:{prt:"spent"},spill:{prt:"_ed",pst:"spilt"},spin:{g:"_ning",prt:"spun",pst:"spun"},spit:{prt:"spat"},split:{prt:"_"},spread:{pst:"_"},spring:{prt:"sprung"},stand:{pst:"stood"},steal:{a:"_er",pst:"stole"},stick:{pst:"stuck"},sting:{pst:"stung"},stink:{prt:"stunk",pst:"stunk"},stream:{a:"_er"},strew:{prt:"_n"},strike:{g:"striking",pst:"struck"},suit:{a:"_er",g:"_ing",pst:"_ed"},sware:{prt:"sworn"},swear:{pst:"swore"},sweep:{prt:"swept"},swim:{g:"_ming",pst:"swam"},swing:{pst:"swung"},take:{fut:"will have _n",pst:"took",perf:"have _n",pluperf:"had _n"},teach:{pst:"taught",pres:"_es"},tear:{pst:"tore"},tell:{pst:"told"},think:{pst:"thought"},thrive:{prt:"_d"},tie:{g:"tying",pst:"_d"},undergo:{prt:"_ne"},understand:{pst:"understood"},upset:{prt:"_"},wait:{a:"_er",g:"_ing",pst:"_ed"},wake:{pst:"woke"},wear:{pst:"wore"},weave:{prt:"woven"},wed:{pst:"wed"},weep:{prt:"wept"},win:{g:"_ning",pst:"won"},wind:{prt:"wound"},withdraw:{pst:"withdrew"},wring:{prt:"wrung"},write:{g:"writing",prt:"written",pst:"wrote"}},Te=Object.keys(_e),Fe=function(t){var e=Te[t],r={};Object.keys(_e[e]).forEach((function(t){var n=_e[e][t];n=n.replace("_",e),r[Ce[t]]=n})),_e[e]=r},Ne=0;Ne<Te.length;Ne++)Fe(Ne);var Ve=_e,Se={b:[{reg:/([^aeiou][aeiou])b$/i,repl:{pr:"$1bs",pa:"$1bbed",gr:"$1bbing"}}],d:[{reg:/(end)$/i,repl:{pr:"$1s",pa:"ent",gr:"$1ing",ar:"$1er"}},{reg:/(eed)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing",ar:"$1er"}},{reg:/(ed)$/i,repl:{pr:"$1s",pa:"$1ded",ar:"$1der",gr:"$1ding"}},{reg:/([^aeiou][ou])d$/i,repl:{pr:"$1ds",pa:"$1dded",gr:"$1dding"}}],e:[{reg:/(eave)$/i,repl:{pr:"$1s",pa:"$1d",gr:"eaving",ar:"$1r"}},{reg:/(ide)$/i,repl:{pr:"$1s",pa:"ode",gr:"iding",ar:"ider"}},{reg:/(t|sh?)(ake)$/i,repl:{pr:"$1$2s",pa:"$1ook",gr:"$1aking",ar:"$1$2r"}},{reg:/w(ake)$/i,repl:{pr:"w$1s",pa:"woke",gr:"waking",ar:"w$1r"}},{reg:/m(ake)$/i,repl:{pr:"m$1s",pa:"made",gr:"making",ar:"m$1r"}},{reg:/(a[tg]|i[zn]|ur|nc|gl|is)e$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}},{reg:/([bd]l)e$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}},{reg:/(om)e$/i,repl:{pr:"$1es",pa:"ame",gr:"$1ing"}}],g:[{reg:/([^aeiou][ou])g$/i,repl:{pr:"$1gs",pa:"$1gged",gr:"$1gging"}}],h:[{reg:/(..)([cs]h)$/i,repl:{pr:"$1$2es",pa:"$1$2ed",gr:"$1$2ing"}}],k:[{reg:/(ink)$/i,repl:{pr:"$1s",pa:"unk",gr:"$1ing",ar:"$1er"}}],m:[{reg:/([^aeiou][aeiou])m$/i,repl:{pr:"$1ms",pa:"$1mmed",gr:"$1mming"}}],n:[{reg:/(en)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}}],p:[{reg:/(e)(ep)$/i,repl:{pr:"$1$2s",pa:"$1pt",gr:"$1$2ing",ar:"$1$2er"}},{reg:/([^aeiou][aeiou])p$/i,repl:{pr:"$1ps",pa:"$1pped",gr:"$1pping"}},{reg:/([aeiu])p$/i,repl:{pr:"$1ps",pa:"$1p",gr:"$1pping"}}],r:[{reg:/([td]er)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}},{reg:/(er)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}}],s:[{reg:/(ish|tch|ess)$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}}],t:[{reg:/(ion|end|e[nc]t)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}},{reg:/(.eat)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}},{reg:/([aeiu])t$/i,repl:{pr:"$1ts",pa:"$1t",gr:"$1tting"}},{reg:/([^aeiou][aeiou])t$/i,repl:{pr:"$1ts",pa:"$1tted",gr:"$1tting"}}],w:[{reg:/(..)(ow)$/i,repl:{pr:"$1$2s",pa:"$1ew",gr:"$1$2ing",prt:"$1$2n"}}],y:[{reg:/([i|f|rr])y$/i,repl:{pr:"$1ies",pa:"$1ied",gr:"$1ying"}}],z:[{reg:/([aeiou]zz)$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}}]},ze={pr:"PresentTense",pa:"PastTense",gr:"Gerund",prt:"Participle",ar:"Actor"},Be=function(t,e){for(var r={},n=Object.keys(e.repl),i=0;i<n.length;i+=1){var o=n[i];r[ze[o]]=t.replace(e.reg,e.repl[o])}return r},De=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t[t.length-1];if(!0===Se.hasOwnProperty(e))for(var r=0;r<Se[e].length;r+=1){var n=Se[e][r].reg;if(!0===n.test(t))return Be(t,Se[e][r])}return{}},qe=/[bcdfghjklmnpqrstvwxz]y$/,Ie={Gerund:function(t){return"e"===t.charAt(t.length-1)?t.replace(/e$/,"ing"):t+"ing"},PresentTense:function(t){return"s"===t.charAt(t.length-1)?t+"es":!0===qe.test(t)?t.slice(0,-1)+"ies":t+"s"},PastTense:function(t){return"e"===t.charAt(t.length-1)?t+"d":"ed"===t.substr(-2)?t:!0===qe.test(t)?t.slice(0,-1)+"ied":t+"ed"}},Le=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,r={};return e&&e.irregulars&&!0===e.irregulars.verbs.hasOwnProperty(t)&&(r=Object.assign({},e.irregulars.verbs[t])),void 0===(r=Object.assign({},De(t),r)).Gerund&&(r.Gerund=Ie.Gerund(t)),void 0===r.PastTense&&(r.PastTense=Ie.PastTense(t)),void 0===r.PresentTense&&(r.PresentTense=Ie.PresentTense(t)),r},Me=[/ght$/,/nge$/,/ough$/,/ain$/,/uel$/,/[au]ll$/,/ow$/,/oud$/,/...p$/],We=[/ary$/],Ge={nice:"nicest",late:"latest",hard:"hardest",inner:"innermost",outer:"outermost",far:"furthest",worse:"worst",bad:"worst",good:"best",big:"biggest",large:"largest"},He=[{reg:/y$/i,repl:"iest"},{reg:/([aeiou])t$/i,repl:"$1ttest"},{reg:/([aeou])de$/i,repl:"$1dest"},{reg:/nge$/i,repl:"ngest"},{reg:/([aeiou])te$/i,repl:"$1test"}],Ue=[/ght$/,/nge$/,/ough$/,/ain$/,/uel$/,/[au]ll$/,/ow$/,/old$/,/oud$/,/e[ae]p$/],Qe=[/ary$/,/ous$/],Re={grey:"greyer",gray:"grayer",green:"greener",yellow:"yellower",red:"redder",good:"better",well:"better",bad:"worse",sad:"sadder",big:"bigger"},Ze=[{reg:/y$/i,repl:"ier"},{reg:/([aeiou])t$/i,repl:"$1tter"},{reg:/([aeou])de$/i,repl:"$1der"},{reg:/nge$/i,repl:"nger"}],Je={toSuperlative:function(t){if(Ge.hasOwnProperty(t))return Ge[t];for(var e=0;e<He.length;e++)if(He[e].reg.test(t))return t.replace(He[e].reg,He[e].repl);for(var r=0;r<We.length;r++)if(!0===We[r].test(t))return null;for(var n=0;n<Me.length;n++)if(!0===Me[n].test(t))return"e"===t.charAt(t.length-1)?t+"st":t+"est";return t+"est"},toComparative:function(t){if(Re.hasOwnProperty(t))return Re[t];for(var e=0;e<Ze.length;e++)if(!0===Ze[e].reg.test(t))return t.replace(Ze[e].reg,Ze[e].repl);for(var r=0;r<Qe.length;r++)if(!0===Qe[r].test(t))return null;for(var n=0;n<Ue.length;n++)if(!0===Ue[n].test(t))return t+"er";return!0===/e$/.test(t)?t+"r":t+"er"}},Ye=function(t){var e={},r=Je.toSuperlative(t);r&&(e.Superlative=r);var n=Je.toComparative(t);return n&&(e.Comparative=n),e},Ke={a:[[/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"],[/([ti])a$/i,"$1a"]],e:[[/(kn|l|w)ife$/i,"$1ives"],[/(hive)$/i,"$1s"],[/([m|l])ouse$/i,"$1ice"],[/([m|l])ice$/i,"$1ice"]],f:[[/^(dwar|handkerchie|hoo|scar|whar)f$/i,"$1ves"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)f$/i,"$1ves"]],i:[[/(octop|vir)i$/i,"$1i"]],m:[[/([ti])um$/i,"$1a"]],n:[[/^(oxen)$/i,"$1"]],o:[[/(al|ad|at|er|et|ed|ad)o$/i,"$1oes"]],s:[[/(ax|test)is$/i,"$1es"],[/(alias|status)$/i,"$1es"],[/sis$/i,"ses"],[/(bu)s$/i,"$1ses"],[/(sis)$/i,"ses"],[/^(?!talis|.*hu)(.*)man$/i,"$1men"],[/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]],x:[[/(matr|vert|ind|cort)(ix|ex)$/i,"$1ices"],[/^(ox)$/i,"$1en"]],y:[[/([^aeiouy]|qu)y$/i,"$1ies"]],z:[[/(quiz)$/i,"$1zes"]]},Xe=/(x|ch|sh|s|z)$/,tr=function(t){var e=t[t.length-1];if(!0===Ke.hasOwnProperty(e))for(var r=0;r<Ke[e].length;r+=1){var n=Ke[e][r][0];if(!0===n.test(t))return t.replace(n,Ke[e][r][1])}return null},er=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,r=e.irregulars.nouns;if(r.hasOwnProperty(t))return r[t];var n=tr(t);return null!==n?n:Xe.test(t)?t+"es":t+"s"},rr=[[/([^v])ies$/i,"$1y"],[/ises$/i,"isis"],[/(kn|[^o]l|w)ives$/i,"$1ife"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)ves$/i,"$1f"],[/^(dwar|handkerchie|hoo|scar|whar)ves$/i,"$1f"],[/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"],[/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"],[/(buffal|tomat|tornad)(oes)$/i,"$1o"],[/(..[aeiou]s)es$/i,"$1"],[/(vert|ind|cort)(ices)$/i,"$1ex"],[/(matr|append)(ices)$/i,"$1ix"],[/(x|ch|ss|sh|z|o)es$/i,"$1"],[/men$/i,"man"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/([m|l])ice$/i,"$1ouse"],[/(cris|ax|test)es$/i,"$1is"],[/(alias|status)es$/i,"$1"],[/(ss)$/i,"$1"],[/(ics)$/i,"$1"],[/s$/i,""]],nr=function(t,e){var r,n=e.irregulars.nouns,i=(r=n,Object.keys(r).reduce((function(t,e){return t[r[e]]=e,t}),{}));if(i.hasOwnProperty(t))return i[t];for(var o=0;o<rr.length;o++)if(!0===rr[o][0].test(t))return t=t.replace(rr[o][0],rr[o][1]);return t},ir={Participle:[{reg:/own$/i,to:"ow"},{reg:/(.)un([g|k])$/i,to:"$1in$2"}],Actor:[{reg:/(er)er$/i,to:"$1"}],PresentTense:[{reg:/(..)(ies)$/i,to:"$1y"},{reg:/(tch|sh)es$/i,to:"$1"},{reg:/(ss|zz)es$/i,to:"$1"},{reg:/([tzlshicgrvdnkmu])es$/i,to:"$1e"},{reg:/(n[dtk]|c[kt]|[eo]n|i[nl]|er|a[ytrl])s$/i,to:"$1"},{reg:/(ow)s$/i,to:"$1"},{reg:/(op)s$/i,to:"$1"},{reg:/([eirs])ts$/i,to:"$1t"},{reg:/(ll)s$/i,to:"$1"},{reg:/(el)s$/i,to:"$1"},{reg:/(ip)es$/i,to:"$1e"},{reg:/ss$/i,to:"ss"},{reg:/s$/i,to:""}],Gerund:[{reg:/(..)(p|d|t|g){2}ing$/i,to:"$1$2"},{reg:/(ll|ss|zz)ing$/i,to:"$1"},{reg:/([^aeiou])ying$/i,to:"$1y"},{reg:/([^ae]i.)ing$/i,to:"$1e"},{reg:/(ea[dklnrtv])ing$/i,to:"$1"},{reg:/(ch|sh)ing$/i,to:"$1"},{reg:/(z)ing$/i,to:"$1e"},{reg:/(a[gdkvtc])ing$/i,to:"$1e"},{reg:/(u[rtcbn])ing$/i,to:"$1e"},{reg:/([^o]o[bdknprv])ing$/i,to:"$1e"},{reg:/([tbckg]l)ing$/i,to:"$1e"},{reg:/(c)ing$/i,to:"$1e"},{reg:/(..)ing$/i,to:"$1"}],PastTense:[{reg:/(ued)$/i,to:"ue"},{reg:/a([^aeiouy])ed$/i,to:"a$1e"},{reg:/([aeiou]zz)ed$/i,to:"$1"},{reg:/(e|i)lled$/i,to:"$1ll"},{reg:/(.)(sh|ch)ed$/i,to:"$1$2"},{reg:/(tl|gl)ed$/i,to:"$1e"},{reg:/(um?pt?)ed$/i,to:"$1"},{reg:/(ss)ed$/i,to:"$1"},{reg:/pped$/i,to:"p"},{reg:/tted$/i,to:"t"},{reg:/(..)gged$/i,to:"$1g"},{reg:/(..)lked$/i,to:"$1lk"},{reg:/([^aeiouy][aeiou])ked$/i,to:"$1ke"},{reg:/(.[aeiou])led$/i,to:"$1l"},{reg:/(..)(h|ion|n[dt]|ai.|[cs]t|pp|all|ss|tt|int|ail|ld|en|oo.|er|k|pp|w|ou.|rt|ght|rm)ed$/i,to:"$1$2"},{reg:/(.ut)ed$/i,to:"$1e"},{reg:/(.pt)ed$/i,to:"$1"},{reg:/(us)ed$/i,to:"$1e"},{reg:/(..[^aeiouy])ed$/i,to:"$1e"},{reg:/(..)ied$/i,to:"$1y"},{reg:/(.o)ed$/i,to:"$1o"},{reg:/(..i)ed$/i,to:"$1"},{reg:/(.a[^aeiou])ed$/i,to:"$1"},{reg:/([aeiou][^aeiou])ed$/i,to:"$1e"},{reg:/([rl])ew$/i,to:"$1ow"},{reg:/([pl])t$/i,to:"$1t"}]},or={Gerund:["ing"],Actor:["erer"],Infinitive:["ate","ize","tion","rify","then","ress","ify","age","nce","ect","ise","ine","ish","ace","ash","ure","tch","end","ack","and","ute","ade","ock","ite","ase","ose","use","ive","int","nge","lay","est","ain","ant","ent","eed","er","le","own","unk","ung","en"],PastTense:["ed","lt","nt","pt","ew","ld"],PresentTense:["rks","cks","nks","ngs","mps","tes","zes","ers","les","acks","ends","ands","ocks","lays","eads","lls","els","ils","ows","nds","ays","ams","ars","ops","ffs","als","urs","lds","ews","ips","es","ts","ns"]},sr=or=Object.keys(or).reduce((function(t,e){return or[e].forEach((function(r){return t[r]=e})),t}),{}),ar={nouns:{addendum:"addenda",alga:"algae",alumna:"alumnae",alumnus:"alumni",analysis:"analyses",antenna:"antennae",appendix:"appendices",avocado:"avocados",axis:"axes",bacillus:"bacilli",barracks:"barracks",beau:"beaux",bus:"buses",cactus:"cacti",chateau:"chateaux",child:"children",circus:"circuses",clothes:"clothes",corpus:"corpora",criterion:"criteria",curriculum:"curricula",database:"databases",deer:"deer",diagnosis:"diagnoses",echo:"echoes",embargo:"embargoes",epoch:"epochs",foot:"feet",formula:"formulae",fungus:"fungi",genus:"genera",goose:"geese",halo:"halos",hippopotamus:"hippopotami",index:"indices",larva:"larvae",leaf:"leaves",libretto:"libretti",loaf:"loaves",man:"men",matrix:"matrices",memorandum:"memoranda",modulus:"moduli",mosquito:"mosquitoes",mouse:"mice",move:"moves",nebula:"nebulae",nucleus:"nuclei",octopus:"octopi",opus:"opera",ovum:"ova",ox:"oxen",parenthesis:"parentheses",person:"people",phenomenon:"phenomena",prognosis:"prognoses",quiz:"quizzes",radius:"radii",referendum:"referenda",rodeo:"rodeos",sex:"sexes",shoe:"shoes",sombrero:"sombreros",stimulus:"stimuli",stomach:"stomachs",syllabus:"syllabi",synopsis:"synopses",tableau:"tableaux",thesis:"theses",thief:"thieves",tooth:"teeth",tornado:"tornados",tuxedo:"tuxedos",vertebra:"vertebrae"},verbs:Ve},ur={conjugate:Le,adjectives:Ye,toPlural:er,toSingular:nr,toInfinitive:function(t,e,r){if(!t)return"";if(!0===e.words.hasOwnProperty(t))for(var n=e.irregulars.verbs,i=Object.keys(n),o=0;o<i.length;o++)for(var s=Object.keys(n[i[o]]),a=0;a<s.length;a++)if(t===n[i[o]][s[a]])return i[o];if((r=r||function(t){var e=t.substr(t.length-3);if(!0===sr.hasOwnProperty(e))return sr[e];var r=t.substr(t.length-2);return!0===sr.hasOwnProperty(r)?sr[r]:"s"===t.substr(t.length-1)?"PresentTense":null}(t))&&ir[r])for(var u=0;u<ir[r].length;u++){var c=ir[r][u];if(!0===c.reg.test(t))return t.replace(c.reg,c.to)}return t}},cr=!1,lr=function(){function t(){e(this,t),Object.defineProperty(this,"words",{enumerable:!1,value:Ee,writable:!0}),Object.defineProperty(this,"hasCompound",{enumerable:!1,value:{},writable:!0}),Object.defineProperty(this,"irregulars",{enumerable:!1,value:ar,writable:!0}),Object.defineProperty(this,"tags",{enumerable:!1,value:Object.assign({},Pe),writable:!0}),Object.defineProperty(this,"transforms",{enumerable:!1,value:ur,writable:!0}),Object.defineProperty(this,"taggers",{enumerable:!1,value:[],writable:!0}),this.unpackWords(ce),this.addIrregulars(),Object.defineProperty(this,"cache",{enumerable:!1,value:{abbreviations:this.getByTag("Abbreviation")}})}return n(t,[{key:"verbose",value:function(t){return cr=t,this}},{key:"isVerbose",value:function(){return cr}},{key:"getByTag",value:function(t){for(var e=this.words,r={},n=Object.keys(e),i=0;i<n.length;i++)"string"==typeof e[n[i]]?e[n[i]]===t&&(r[n[i]]=!0):e[n[i]].some((function(e){return e===t}))&&(r[n[i]]=!0);return r}},{key:"unpackWords",value:function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)for(var n=Object.keys(t[e[r]]),i=0;i<n.length;i++)ke(n[i],e[r],this.words),je(n[i],e[r],this)}},{key:"addWords",value:function(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r].toLowerCase();ke(n,t[e[r]],this.words),je(n,t[e[r]],this)}}},{key:"addIrregulars",value:function(){return Oe(this),this}},{key:"addTags",value:function(t){return t=Object.assign({},t),this.tags=Object.assign(this.tags,t),this.tags=we(this.tags),this}},{key:"postProcess",value:function(t){return this.taggers.push(t),this}},{key:"stats",value:function(){return{words:Object.keys(this.words).length,plurals:Object.keys(this.irregulars.nouns).length,conjugations:Object.keys(this.irregulars.verbs).length,compounds:Object.keys(this.hasCompound).length,postProcessors:this.taggers.length}}}]),t}(),hr=function(t){return JSON.parse(JSON.stringify(t))};lr.prototype.clone=function(){var t=new lr;return t.words=Object.assign({},this.words),t.hasCompound=Object.assign({},this.hasCompound),t.irregulars=hr(this.irregulars),t.tags=hr(this.tags),t.transforms=this.transforms,t.taggers=this.taggers,t};var fr=lr,pr=C((function(t,e){e.all=function(){return this.parents()[0]||this},e.parent=function(){return this.from?this.from:this},e.parents=function(t){var e=[];return function t(r){r.from&&(e.push(r.from),t(r.from))}(this),e=e.reverse(),"number"==typeof t?e[t]:e},e.clone=function(t){var e=this.list.map((function(e){return e.clone(t)}));return this.buildFrom(e)},e.wordCount=function(){return this.list.reduce((function(t,e){return t+=e.wordCount()}),0)},e.wordcount=e.wordCount})),dr=(pr.all,pr.parent,pr.parents,pr.clone,pr.wordCount,pr.wordcount,C((function(t,e){e.first=function(t){return void 0===t?this.get(0):this.slice(0,t)},e.last=function(t){if(void 0===t)return this.get(this.list.length-1);var e=this.list.length;return this.slice(e-t,e)},e.slice=function(t,e){var r=this.list.slice(t,e);return this.buildFrom(r)},e.eq=function(t){var e=this.list[t];return void 0===e?this.buildFrom([]):this.buildFrom([e])},e.get=e.eq,e.firstTerms=function(){return this.match("^.")},e.firstTerm=e.firstTerms,e.lastTerms=function(){return this.match(".$")},e.lastTerm=e.lastTerms,e.termList=function(t){for(var e=[],r=0;r<this.list.length;r++)for(var n=this.list[r].terms(),i=0;i<n.length;i++)if(e.push(n[i]),void 0!==t&&void 0!==e[t])return e[t];return e};e.groups=function(t){return void 0===t?function(t){for(var e={},r={},n=function(e){for(var n=t.list[e],i=Object.keys(n.groups).map((function(t){return n.groups[t]})),o=0;o<i.length;o++){var s=i[o],a=s.group,u=s.start,c=s.length;r[a]||(r[a]=[]),r[a].push(n.buildFrom(u,c))}},i=0;i<t.list.length;i++)n(i);for(var o=Object.keys(r),s=0;s<o.length;s++){var a=o[s];e[a]=t.buildFrom(r[a])}return e}(this):("number"==typeof t&&(t=String(t)),function(t,e){for(var r=[],n=function(n){var i=t.list[n],o=Object.keys(i.groups);(o=o.filter((function(t){return i.groups[t].group===e}))).forEach((function(t){r.push(i.buildFrom(i.groups[t].start,i.groups[t].length))}))},i=0;i<t.list.length;i++)n(i);return t.buildFrom(r)}(this,t)||this.buildFrom([]))},e.group=e.groups,e.sentences=function(t){var e=[];return this.list.forEach((function(t){e.push(t.fullSentence())})),"number"==typeof t?this.buildFrom([e[t]]):this.buildFrom(e)},e.sentence=e.sentences}))),gr=(dr.first,dr.last,dr.slice,dr.eq,dr.get,dr.firstTerms,dr.firstTerm,dr.lastTerms,dr.lastTerm,dr.termList,dr.groups,dr.group,dr.sentences,dr.sentence,function(t,e){if(t._cache&&!0===t._cache.set){for(var r=(a=[],u=[],e.forEach((function(t){!0!==t.optional&&!0!==t.negative&&(void 0!==t.tag&&a.push(t.tag),void 0!==t.word&&u.push(t.word))})),{tags:a,words:u}),n=r.words,i=r.tags,o=0;o<n.length;o++)if(void 0===t._cache.words[n[o]])return!1;for(var s=0;s<i.length;s++)if(void 0===t._cache.tags[i[s]])return!1}var a,u;return!0}),vr=C((function(t,e){e.match=function(t,e){var r=Vt(t);if(0===r.length)return this.buildFrom([]);if(!1===gr(this,r))return this.buildFrom([]);var n=this.list.reduce((function(t,e){return t.concat(e.match(r))}),[]);return null!=e&&""!==e?this.buildFrom(n).groups(e):this.buildFrom(n)},e.not=function(t){var e=Vt(t);if(0===e.length||!1===gr(this,e))return this;var r=this.list.reduce((function(t,r){return t.concat(r.not(e))}),[]);return this.buildFrom(r)},e.matchOne=function(t){var e=Vt(t);if(!1===gr(this,e))return this.buildFrom([]);for(var r=0;r<this.list.length;r++){var n=this.list[r].match(e,!0);return this.buildFrom(n)}return this.buildFrom([])},e.if=function(t){var e=Vt(t);if(!1===gr(this,e))return this.buildFrom([]);var r=this.list.filter((function(t){return!0===t.has(e)}));return this.buildFrom(r)},e.ifNo=function(t){var e=Vt(t),r=this.list.filter((function(t){return!1===t.has(e)}));return this.buildFrom(r)},e.has=function(t){var e=Vt(t);return!1!==gr(this,e)&&this.list.some((function(t){return!0===t.has(e)}))},e.lookAhead=function(t){t||(t=".*");var e=Vt(t),r=[];return this.list.forEach((function(t){r=r.concat(t.lookAhead(e))})),r=r.filter((function(t){return t})),this.buildFrom(r)},e.lookAfter=e.lookAhead,e.lookBehind=function(t){t||(t=".*");var e=Vt(t),r=[];return this.list.forEach((function(t){r=r.concat(t.lookBehind(e))})),r=r.filter((function(t){return t})),this.buildFrom(r)},e.lookBefore=e.lookBehind,e.before=function(t){var e=Vt(t),r=this.if(e).list.map((function(t){var r=t.terms().map((function(t){return t.id})),n=t.match(e)[0],i=r.indexOf(n.start);return 0===i||-1===i?null:t.buildFrom(t.start,i)}));return r=r.filter((function(t){return null!==t})),this.buildFrom(r)},e.after=function(t){var e=Vt(t),r=this.if(e).list.map((function(t){var r=t.terms(),n=r.map((function(t){return t.id})),i=t.match(e)[0],o=n.indexOf(i.start);if(-1===o||!r[o+i.length])return null;var s=r[o+i.length].id,a=t.length-o-i.length;return t.buildFrom(s,a)}));return r=r.filter((function(t){return null!==t})),this.buildFrom(r)}})),mr=(vr.match,vr.not,vr.matchOne,vr.ifNo,vr.has,vr.lookAhead,vr.lookAfter,vr.lookBehind,vr.lookBefore,vr.before,vr.after,function(t,e,r,n){var i=[];"string"==typeof t&&(i=t.split(" ")),e.list.forEach((function(o){var s=o.terms();!0===r&&(s=s.filter((function(r){return r.canBe(t,e.world)}))),s.forEach((function(r,o){i.length>1?i[o]&&"."!==i[o]&&r.tag(i[o],n,e.world):r.tag(t,n,e.world)}))}))}),br={tag:function(t,e){return t?(mr(t,this,!1,e),this):this},tagSafe:function(t,e){return t?(mr(t,this,!0,e),this):this},unTag:function(t,e){var r=this;return this.list.forEach((function(n){n.terms().forEach((function(n){return n.unTag(t,e,r.world)}))})),this},canBe:function(t){if(!t)return this;var e=this.world,r=this.list.reduce((function(r,n){return r.concat(n.canBe(t,e))}),[]);return this.buildFrom(r)}},yr={map:function(e){var r=this;if(!e)return this;var n=this.list.map((function(t,n){var i=r.buildFrom([t]);i.from=null;var o=e(i,n);return o&&o.list&&o.list[0]?o.list[0]:o}));return 0===(n=n.filter((function(t){return t}))).length?this.buildFrom(n):"object"!==t(n[0])||"Phrase"!==n[0].isA?n:this.buildFrom(n)},forEach:function(t,e){var r=this;return t?(this.list.forEach((function(n,i){var o=r.buildFrom([n]);!0===e&&(o.from=null),t(o,i)})),this):this},filter:function(t){var e=this;if(!t)return this;var r=this.list.filter((function(r,n){var i=e.buildFrom([r]);return i.from=null,t(i,n)}));return this.buildFrom(r)},find:function(t){var e=this;if(!t)return this;var r=this.list.find((function(r,n){var i=e.buildFrom([r]);return i.from=null,t(i,n)}));return r?this.buildFrom([r]):void 0},some:function(t){var e=this;return t?this.list.some((function(r,n){var i=e.buildFrom([r]);return i.from=null,t(i,n)})):this},random:function(t){if(!this.found)return this;var e=Math.floor(Math.random()*this.list.length);if(void 0===t){var r=[this.list[e]];return this.buildFrom(r)}return e+t>this.length&&(e=(e=this.length-t)<0?0:e),this.slice(e,e+t)}},$r=function(t){return t.split(/[ -]/g)},wr=function(t,e,r){for(var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={};return t.forEach((function(t,n){var i=!0;void 0!==e[n]&&(i=e[n]),t=(t=(t||"").toLowerCase()).replace(/[,;.!?]+$/,"");var o=$r(t).map((function(t){return t.trim()}));r[o[0]]=r[o[0]]||{},1===o.length?r[o[0]].value=i:(r[o[0]].more=r[o[0]].more||[],r[o[0]].more.push({rest:o.slice(1),value:i}))})),r}(t,e),i=[],o=function(t){for(var e=r.list[t],o=e.terms().map((function(t){return t.reduced})),s=function(t){void 0!==n[o[t]]&&(void 0!==n[o[t]].more&&n[o[t]].more.forEach((function(r){void 0!==o[t+r.rest.length]&&(!0===r.rest.every((function(e,r){return e===o[t+r+1]}))&&i.push({id:e.terms()[t].id,value:r.value,length:r.rest.length+1}))})),void 0!==n[o[t]].value&&i.push({id:e.terms()[t].id,value:n[o[t]].value,length:1}))},a=0;a<o.length;a++)s(a)},s=0;s<r.list.length;s++)o(s);return i},Ar=C((function(t,e){e.lookup=function(t){var e,r=this,n=[],i=(e=t)&&"[object Object]"===Object.prototype.toString.call(e);!0===i&&(t=Object.keys(t).map((function(e){return n.push(t[e]),e}))),"string"==typeof t&&(t=[t]),!0!==this._cache.set&&this.cache();var o=wr(t,n,this),s=this.list[0];if(!0===i){var a={};return o.forEach((function(t){a[t.value]=a[t.value]||[],a[t.value].push(s.buildFrom(t.id,t.length))})),Object.keys(a).forEach((function(t){a[t]=r.buildFrom(a[t])})),a}return o=o.map((function(t){return s.buildFrom(t.id,t.length)})),this.buildFrom(o)},e.lookUp=e.lookup})),Pr=(Ar.lookup,Ar.lookUp,{cache:function(t){var e=this;t=t||{};var r={},n={};return this._cache.words=r,this._cache.tags=n,this._cache.set=!0,this.list.forEach((function(i,o){i.cache=i.cache||{},i.terms().forEach((function(i){r[i.reduced]&&!r.hasOwnProperty(i.reduced)||(r[i.reduced]=r[i.reduced]||[],r[i.reduced].push(o),Object.keys(i.tags).forEach((function(t){n[t]=n[t]||[],n[t].push(o)})),t.root&&(i.setRoot(e.world),r[i.root]=!0))}))})),this},uncache:function(){return this._cache={},this.list.forEach((function(t){t.cache={}})),this.parents().forEach((function(t){t._cache={},t.list.forEach((function(t){t.cache={}}))})),this}}),xr=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},kr={replaceWith:function(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(!0===n&&(n={keepTags:!0}),!1===n&&(n={keepTags:!1}),n=n||{},this.uncache(),this.list.forEach((function(i){var o,s=e;if("function"==typeof e&&(s=e(i)),s&&"object"===t(s)&&"Doc"===s.isA)o=s.list,r.pool().merge(s.pool());else{if("string"!=typeof s)return;!1!==n.keepCase&&i.terms(0).isTitleCase()&&(s=xr(s)),o=ae(s,r.world,r.pool()),r.buildFrom(o).tagger()}if(!0===n.keepTags){var a=i.json({terms:{tags:!0}}).terms;o[0].terms().forEach((function(t,e){a[e]&&t.tagSafe(a[e].tags,"keptTag",r.world)}))}i.replace(o[0],r)})),this):this.delete()},replace:function(t,e,r){return void 0===e?this.replaceWith(t,r):(this.match(t).replaceWith(e,r),this)}},jr=C((function(t,e){e.append=function(t){var e=this;return t?(this.uncache(),this.list.forEach((function(r){var n=ae(t,e.world,e.pool())[0];e.buildFrom([n]).tagger(),r.append(n,e)})),this):this},e.insertAfter=e.append,e.insertAt=e.append,e.prepend=function(t){var e=this;return t?(this.uncache(),this.list.forEach((function(r){var n=ae(t,e.world,e.pool())[0];e.buildFrom([n]).tagger(),r.prepend(n,e)})),this):this},e.insertBefore=e.prepend,e.concat=function(){this.uncache();for(var t=this.list.slice(0),e=0;e<arguments.length;e++){var r=arguments[e];if("string"==typeof r){var n=ae(r,this.world);t=t.concat(n)}else"Doc"===r.isA?t=t.concat(r.list):"Phrase"===r.isA&&t.push(r)}return this.buildFrom(t)},e.delete=function(t){var e=this;this.uncache();var r=this;return t&&(r=this.match(t)),r.list.forEach((function(t){return t.delete(e)})),this},e.remove=e.delete})),Or=(jr.append,jr.insertAfter,jr.insertAt,jr.prepend,jr.insertBefore,jr.concat,jr.remove,{clean:!0,reduced:!0,root:!0}),Er={text:function(e){var r=this;e=e||{};var n=!1;0===this.parents().length&&(n=!0),("root"===e||"object"===t(e)&&e.root)&&this.list.forEach((function(t){t.terms().forEach((function(t){null===t.root&&t.setRoot(r.world)}))}));var i=this.list.reduce((function(t,i,o){var s=!n&&0===o,a=!n&&o===r.list.length-1;return t+i.text(e,s,a)}),"");return!0!==Or[e]&&!0!==e.reduced&&!0!==e.clean&&!0!==e.root||(i=i.trim()),i}},Cr=function(t,e,r){var n=function(t){var e=0,r=0,n={};return t.termList().forEach((function(t){n[t.id]={index:r,start:e+t.pre.length,length:t.text.length},e+=t.pre.length+t.text.length+t.post.length,r+=1})),n}(t.all());(r.terms.index||r.index)&&e.forEach((function(t){t.terms.forEach((function(t){t.index=n[t.id].index})),t.index=t.terms[0].index})),(r.terms.offset||r.offset)&&e.forEach((function(t){t.terms.forEach((function(t){t.offset=n[t.id]||{}})),t.offset=t.terms[0].offset,t.offset.length=t.text.length}))},_r=C((function(t,e){var r={text:!0,terms:!0,trim:!0},n=function(t){return(t=Object.assign({},r,t)).unique&&(t.reduced=!0),t.offset&&(t.text=!0,t.terms&&!0!==t.terms||(t.terms={}),t.terms.offset=!0),(t.index||t.terms.index)&&(t.terms=!0===t.terms?{}:t.terms,t.terms.id=!0),t};e.json=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof e&&this.list[e])return this.list[e].json(r);!0===(e=n(e)).root&&this.list.forEach((function(e){e.terms().forEach((function(e){null===e.root&&e.setRoot(t.world)}))}));var i=this.list.map((function(r){return r.json(e,t.world)}));if((e.terms.offset||e.offset||e.terms.index||e.index)&&Cr(this,i,e),e.frequency||e.freq||e.count){var o={};this.list.forEach((function(t){var e=t.text("reduced");o[e]=o[e]||0,o[e]+=1})),this.list.forEach((function(t,e){i[e].count=o[t.text("reduced")]}))}if(e.unique){var s={};i=i.filter((function(t){return!0!==s[t.reduced]&&(s[t.reduced]=!0,!0)}))}return i},e.data=e.json})),Tr=(_r.json,_r.data,C((function(t){var e=function(t,e){for(t=t.toString();t.length<e;)t+=" ";return t};var r={green:"#7f9c6c",red:"#914045",blue:"#6699cc",magenta:"#6D5685",cyan:"#2D85A8",yellow:"#e6d7b3",black:"#303b50"},n={green:function(t){return"[32m"+t+"[0m"},red:function(t){return"[31m"+t+"[0m"},blue:function(t){return"[34m"+t+"[0m"},magenta:function(t){return"[35m"+t+"[0m"},cyan:function(t){return"[36m"+t+"[0m"},yellow:function(t){return"[33m"+t+"[0m"},black:function(t){return"[30m"+t+"[0m"}};t.exports=function(t){return"undefined"!=typeof window&&window.document?(function(t){var n=t.world.tags;t.list.forEach((function(t){console.log('\n%c"'+t.text()+'"',"color: #e6d7b3;"),t.terms().forEach((function(t){var i=Object.keys(t.tags),o=t.text||"-";t.implicit&&(o="["+t.implicit+"]");var s="'"+o+"'";s=e(s,8);var a=i.find((function(t){return n[t]&&n[t].color})),u="steelblue";n[a]&&(u=n[a].color,u=r[u]),console.log("   ".concat(s,"  -  %c").concat(i.join(", ")),"color: ".concat(u||"steelblue",";"))}))}))}(t),t):(console.log(n.blue("=====")),t.list.forEach((function(r){console.log(n.blue("  -----")),r.terms().forEach((function(r){var i=Object.keys(r.tags),o=r.text||"-";r.implicit&&(o="["+r.implicit+"]");var s="'"+(o=n.yellow(o))+"'";s=e(s,18);var a=n.blue("  ｜ ")+s+"  - "+function(t,e){return(t=t.map((function(t){if(!e.tags.hasOwnProperty(t))return t;var r=e.tags[t].color||"blue";return n[r](t)}))).join(", ")}(i,t.world);console.log(a)}))})),console.log(""),t)}}))),Fr=function(t){var e=t.json({text:!1,terms:!1,reduced:!0}),r={};e.forEach((function(t){r[t.reduced]||(t.count=0,r[t.reduced]=t),r[t.reduced].count+=1}));var n=Object.keys(r).map((function(t){return r[t]}));return n.sort((function(t,e){return t.count>e.count?-1:t.count<e.count?1:0})),n},Nr={debug:function(){return Tr(this),this},out:function(t){if("text"===t)return this.text();if("normal"===t)return this.text("normal");if("json"===t)return this.json();if("offset"===t||"offsets"===t)return this.json({offset:!0});if("array"===t)return this.json({terms:!1}).map((function(t){return t.text}));if("freq"===t||"frequency"===t)return Fr(this);if("terms"===t){var e=[];return this.json({text:!1,terms:{text:!0}}).forEach((function(t){var r=t.terms.map((function(t){return t.text}));r=r.filter((function(t){return t})),e=e.concat(r)})),e}return"tags"===t?this.list.map((function(t){return t.terms().reduce((function(t,e){return t[e.clean||e.implicit]=Object.keys(e.tags),t}),{})})):"debug"===t?(Tr(this),this):this.text()}},Vr={alpha:function(t,e){var r=t.text("clean"),n=e.text("clean");return r<n?-1:r>n?1:0},length:function(t,e){var r=t.text().trim().length,n=e.text().trim().length;return r<n?1:r>n?-1:0},wordCount:function(t,e){var r=t.wordCount(),n=e.wordCount();return r<n?1:r>n?-1:0}};Vr.alphabetical=Vr.alpha,Vr.wordcount=Vr.wordCount;var Sr={index:!0,sequence:!0,seq:!0,sequential:!0,chron:!0,chronological:!0},zr={sort:function(t){return"freq"===(t=t||"alpha")||"frequency"===t||"topk"===t?(r={},n={case:!0,punctuation:!1,whitespace:!0,unicode:!0},(e=this).list.forEach((function(t){var e=t.text(n);r[e]=r[e]||0,r[e]+=1})),e.list.sort((function(t,e){var i=r[t.text(n)],o=r[e.text(n)];return i<o?1:i>o?-1:0})),e):Sr.hasOwnProperty(t)?function(t){var e={};return t.json({terms:{offset:!0}}).forEach((function(t){e[t.terms[0].id]=t.terms[0].offset.start})),t.list=t.list.sort((function(t,r){return e[t.start]>e[r.start]?1:e[t.start]<e[r.start]?-1:0})),t}(this):"function"==typeof(t=Vr[t]||t)?(this.list=this.list.sort(t),this):this;var e,r,n},reverse:function(){var t=[].concat(this.list);return t=t.reverse(),this.buildFrom(t)},unique:function(){var t=[].concat(this.list),e={};return t=t.filter((function(t){var r=t.text("reduced").trim();return!0!==e.hasOwnProperty(r)&&(e[r]=!0,!0)})),this.buildFrom(t)}},Br=/[\[\]{}⟨⟩:,،、‒–—―…‹›«»‐\-;\/⁄·*\•^†‡°¡¿※№÷×ºª%‰=‱¶§~|‖¦©℗®℠™¤₳฿]/g,Dr=/['‘’“”"′″‴]+/g,qr={whitespace:function(t){var e=t.list.map((function(t){return t.terms()}));e.forEach((function(t,r){t.forEach((function(n,i){!0!==n.hasDash()?(n.pre=n.pre.replace(/\s/g,""),n.post=n.post.replace(/\s/g,""),(t.length-1!==i||e[r+1])&&(n.implicit&&!0===Boolean(n.text)||!0!==n.hasHyphen()&&(n.post+=" "))):n.post=" - "}))}))},punctuation:function(t){t.forEach((function(t){!0===t.hasHyphen()&&(t.post=" "),t.pre=t.pre.replace(Br,""),t.post=t.post.replace(Br,""),t.post=t.post.replace(/\.\.\./,""),!0===/!/.test(t.post)&&(t.post=t.post.replace(/!/g,""),t.post="!"+t.post),!0===/\?/.test(t.post)&&(t.post=t.post.replace(/[\?!]*/,""),t.post="?"+t.post)}))},unicode:function(t){t.forEach((function(t){!0!==t.isImplicit()&&(t.text=p(t.text))}))},quotations:function(t){t.forEach((function(t){t.post=t.post.replace(Dr,""),t.pre=t.pre.replace(Dr,"")}))},adverbs:function(t){t.match("#Adverb").not("(not|nary|seldom|never|barely|almost|basically|so)").remove()},abbreviations:function(t){t.list.forEach((function(t){var e=t.terms();e.forEach((function(t,r){!0===t.tags.Abbreviation&&e[r+1]&&(t.post=t.post.replace(/^\./,""))}))}))}},Ir={whitespace:!0,unicode:!0,punctuation:!0,emoji:!0,acronyms:!0,abbreviations:!0,case:!1,contractions:!1,parentheses:!1,quotations:!1,adverbs:!1,possessives:!1,verbs:!1,nouns:!1,honorifics:!1},Lr={light:{},medium:{case:!0,contractions:!0,parentheses:!0,quotations:!0,adverbs:!0}};Lr.heavy=Object.assign({},Lr.medium,{possessives:!0,verbs:!0,nouns:!0,honorifics:!0});var Mr={normalize:function(t){"string"==typeof(t=t||{})&&(t=Lr[t]||{}),t=Object.assign({},Ir,t),this.uncache();var e=this.termList();return t.case&&this.toLowerCase(),t.whitespace&&qr.whitespace(this),t.unicode&&qr.unicode(e),t.punctuation&&qr.punctuation(e),t.emoji&&this.remove("(#Emoji|#Emoticon)"),t.acronyms&&this.acronyms().strip(),t.abbreviations&&qr.abbreviations(this),(t.contraction||t.contractions)&&this.contractions().expand(),t.parentheses&&this.parentheses().unwrap(),(t.quotations||t.quotes)&&qr.quotations(e),t.adverbs&&qr.adverbs(this),(t.possessive||t.possessives)&&this.possessives().strip(),t.verbs&&this.verbs().toInfinitive(),(t.nouns||t.plurals)&&this.nouns().toSingular(),t.honorifics&&this.remove("#Honorific"),this}},Wr=C((function(t,e){e.splitOn=function(t){if(!t)return this.parent().splitOn(this);var e=Vt(t),r=[];return this.list.forEach((function(t){var n=t.match(e);if(0!==n.length){var i=t;n.forEach((function(t){var e=i.splitOn(t);e.before&&r.push(e.before),e.match&&r.push(e.match),i=e.after})),i&&r.push(i)}else r.push(t)})),this.buildFrom(r)},e.splitAfter=function(t){if(!t)return this.parent().splitAfter(this);var e=Vt(t),r=[];return this.list.forEach((function(t){var n=t.match(e);if(0!==n.length){var i=t;n.forEach((function(t){var e=i.splitOn(t);e.before&&e.match?(e.before.length+=e.match.length,r.push(e.before)):e.match&&r.push(e.match),i=e.after})),i&&r.push(i)}else r.push(t)})),this.buildFrom(r)},e.split=e.splitAfter,e.splitBefore=function(t){if(!t)return this.parent().splitBefore(this);var e=Vt(t),r=[];return this.list.forEach((function(t){var n=t.match(e);if(0!==n.length){var i=t;n.forEach((function(t){var e=i.splitOn(t);e.before&&r.push(e.before),e.match&&e.after&&(e.match.length+=e.after.length),i=e.match})),i&&r.push(i)}else r.push(t)})),this.buildFrom(r)},e.segment=function(t,e){t=t||{},e=e||{text:!0};var r=this,n=Object.keys(t);return n.forEach((function(t){r=r.splitOn(t)})),r.list.forEach((function(e){for(var r=0;r<n.length;r+=1)if(e.has(n[r]))return void(e.segment=t[n[r]])})),r.list.map((function(t){var r=t.json(e);return r.segment=t.segment||null,r}))}})),Gr=(Wr.splitOn,Wr.splitAfter,Wr.split,Wr.splitBefore,Wr.segment,function(t,e){var r=t.world;return t.list.forEach((function(t){t.terms().forEach((function(t){return t[e](r)}))})),t}),Hr={toLowerCase:function(){return Gr(this,"toLowerCase")},toUpperCase:function(){return Gr(this,"toUpperCase")},toTitleCase:function(){return Gr(this,"toTitleCase")},toCamelCase:function(){return this.list.forEach((function(t){var e=t.terms();e.forEach((function(t,r){0!==r&&t.toTitleCase(),r!==e.length-1&&(t.post="")}))})),this}},Ur=C((function(t,e){e.pre=function(t,e){return void 0===t?this.list[0].terms(0).pre:(this.list.forEach((function(r){var n=r.terms(0);!0===e?n.pre+=t:n.pre=t})),this)},e.post=function(t,e){return void 0===t?this.list.map((function(t){var e=t.terms();return e[e.length-1].post})):(this.list.forEach((function(r){var n=r.terms(),i=n[n.length-1];!0===e?i.post+=t:i.post=t})),this)},e.trim=function(){return this.list=this.list.map((function(t){return t.trim()})),this},e.hyphenate=function(){return this.list.forEach((function(t){var e=t.terms();e.forEach((function(t,r){0!==r&&(t.pre=""),e[r+1]&&(t.post="-")}))})),this},e.dehyphenate=function(){var t=/(-|–|—)/;return this.list.forEach((function(e){e.terms().forEach((function(e){t.test(e.post)&&(e.post=" ")}))})),this},e.deHyphenate=e.dehyphenate,e.toQuotations=function(t,e){return t=t||'"',e=e||'"',this.list.forEach((function(r){var n=r.terms();n[0].pre=t+n[0].pre;var i=n[n.length-1];i.post=e+i.post})),this},e.toQuotation=e.toQuotations,e.toParentheses=function(t,e){return t=t||"(",e=e||")",this.list.forEach((function(r){var n=r.terms();n[0].pre=t+n[0].pre;var i=n[n.length-1];i.post=e+i.post})),this}})),Qr=(Ur.pre,Ur.post,Ur.trim,Ur.hyphenate,Ur.dehyphenate,Ur.deHyphenate,Ur.toQuotations,Ur.toQuotation,Ur.toParentheses,{join:function(t){this.uncache();for(var e=this.list[0],r=e.length,n={},i=1;i<this.list.length;i++){var o=this.list[i];n[o.start]=!0;var s=e.lastTerm();t&&(s.post+=t),s.next=o.start,o.terms(0).prev=s.id,e.length+=o.length,e.cache={}}var a=e.length-r;return this.parents().forEach((function(t){t.list.forEach((function(t){for(var r=t.terms(),n=0;n<r.length;n++)if(r[n].id===e.start){t.length+=a;break}t.cache={}})),t.list=t.list.filter((function(t){return!0!==n[t.start]}))})),this.buildFrom([e])}}),Rr=/[,\)"';:\-–—\.…]/,Zr=function(t,e){if(t.found){for(var r=t.termList(),n=0;n<r.length-1;n++){var i=r[n];if(Rr.test(i.post))return}r.forEach((function(t){t.implicit=t.clean})),r[0].text+=e,r.slice(1).forEach((function(t){t.text=""}));for(var o=0;o<r.length-1;o++){var s=r[o];s.post=s.post.replace(/ /,"")}}},Jr={contract:function(){var t=this.not("@hasContraction"),e=t.match("(we|they|you) are");return Zr(e,"'re"),e=t.match("(he|she|they|it|we|you) will"),Zr(e,"'ll"),e=t.match("(he|she|they|it|we) is"),Zr(e,"'s"),e=t.match("#Person is"),Zr(e,"'s"),e=t.match("#Person would"),Zr(e,"'d"),e=t.match("(is|was|had|would|should|could|do|does|have|has|can) not"),Zr(e,"n't"),e=t.match("(i|we|they) have"),Zr(e,"'ve"),e=t.match("(would|should|could) have"),Zr(e,"'ve"),e=t.match("i am"),Zr(e,"'m"),e=t.match("going to"),this}},Yr=Object.assign({},pr,dr,vr,br,yr,Ar,Pr,kr,jr,Er,_r,Nr,zr,Mr,Wr,Hr,Ur,Qr,Jr),Kr={};[["terms","."],["hyphenated","@hasHyphen ."],["adjectives","#Adjective"],["hashTags","#HashTag"],["emails","#Email"],["emoji","#Emoji"],["emoticons","#Emoticon"],["atMentions","#AtMention"],["urls","#Url"],["adverbs","#Adverb"],["pronouns","#Pronoun"],["conjunctions","#Conjunction"],["prepositions","#Preposition"]].forEach((function(t){Kr[t[0]]=function(e){var r=this.match(t[1]);return"number"==typeof e&&(r=r.get(e)),r}})),Kr.emojis=Kr.emoji,Kr.atmentions=Kr.atMentions,Kr.words=Kr.terms,Kr.phoneNumbers=function(t){var e=this.splitAfter("@hasComma");return e=e.match("#PhoneNumber+"),"number"==typeof t&&(e=e.get(t)),e},Kr.money=function(t){var e=this.match("#Money #Currency?");return"number"==typeof t&&(e=e.get(t)),e},Kr.places=function(t){var e=this.match("(#City && @hasComma) (#Region|#Country)"),r=this.not(e).splitAfter("@hasComma");return(r=r.concat(e)).sort("index"),r=r.match("#Place+"),"number"==typeof t&&(r=r.get(t)),r},Kr.organizations=function(t){var e=this.clauses();return e=e.match("#Organization+"),"number"==typeof t&&(e=e.get(t)),e},Kr.entities=function(t){var e=this.clauses(),r=e.people();return(r=(r=(r=r.concat(e.places())).concat(e.organizations())).not(["someone","man","woman","mother","brother","sister","father"])).sort("sequence"),"number"==typeof t&&(r=r.get(t)),r},Kr.things=Kr.entities,Kr.topics=Kr.entities;var Xr=Kr,tn=/^(under|over)-?/,en=function(t,e,r){var n=r.words,i=t[e].reduced+" "+t[e+1].reduced;return void 0!==n[i]&&!0===n.hasOwnProperty(i)?(t[e].tag(n[i],"lexicon-two",r),t[e+1].tag(n[i],"lexicon-two",r),1):e+2<t.length&&void 0!==n[i+=" "+t[e+2].reduced]&&!0===n.hasOwnProperty(i)?(t[e].tag(n[i],"lexicon-three",r),t[e+1].tag(n[i],"lexicon-three",r),t[e+2].tag(n[i],"lexicon-three",r),2):e+3<t.length&&void 0!==n[i+=" "+t[e+3].reduced]&&!0===n.hasOwnProperty(i)?(t[e].tag(n[i],"lexicon-four",r),t[e+1].tag(n[i],"lexicon-four",r),t[e+2].tag(n[i],"lexicon-four",r),t[e+3].tag(n[i],"lexicon-four",r),3):0},rn=function(t,e){for(var r=e.words,n=e.hasCompound,i=0;i<t.length;i+=1){var o=t[i].clean;if(!0===n[o]&&i+1<t.length){var s=en(t,i,e);if(s>0){i+=s;continue}}if(void 0===r[o]||!0!==r.hasOwnProperty(o))if(o===t[i].reduced||!0!==r.hasOwnProperty(t[i].reduced)){if(!0===tn.test(o)){var a=o.replace(tn,"");!0===r.hasOwnProperty(a)&&t[i].tag(r[a],"noprefix-lexicon",e)}}else t[i].tag(r[t[i].reduced],"lexicon",e);else t[i].tag(r[o],"lexicon",e)}return t},nn=function(t){var e=t.termList();return rn(e,t.world),t},on=function(t){var r=function(t){function r(){return e(this,r),a(this,o(r).apply(this,arguments))}return i(r,t),n(r,[{key:"stripPeriods",value:function(){return this.termList().forEach((function(t){!0===t.tags.Abbreviation&&t.next&&(t.post=t.post.replace(/^\./,""));var e=t.text.replace(/\./,"");t.set(e)})),this}},{key:"addPeriods",value:function(){return this.termList().forEach((function(t){t.post=t.post.replace(/^\./,""),t.post="."+t.post})),this}}]),r}(t);return r.prototype.unwrap=r.prototype.stripPeriods,t.prototype.abbreviations=function(t){var e=this.match("#Abbreviation");return"number"==typeof t&&(e=e.get(t)),new r(e.list,this,this.world)},t},sn=/\./,an=function(t){var r=function(t){function r(){return e(this,r),a(this,o(r).apply(this,arguments))}return i(r,t),n(r,[{key:"stripPeriods",value:function(){return this.termList().forEach((function(t){var e=t.text.replace(/\./g,"");t.set(e)})),this}},{key:"addPeriods",value:function(){return this.termList().forEach((function(t){var e=t.text.replace(/\./g,"");e=e.split("").join("."),!1===sn.test(t.post)&&(e+="."),t.set(e)})),this}}]),r}(t);return r.prototype.unwrap=r.prototype.stripPeriods,r.prototype.strip=r.prototype.stripPeriods,t.prototype.acronyms=function(t){var e=this.match("#Acronym");return"number"==typeof t&&(e=e.get(t)),new r(e.list,this,this.world)},t},un=function(t){return t.prototype.clauses=function(e){var r=this.if("@hasComma").notIf("@hasComma @hasComma").notIf("@hasComma . .? (and|or) .").notIf("(#City && @hasComma) #Country").notIf("(#Date && @hasComma) #Year").notIf("@hasComma (too|also)$").match("@hasComma"),n=this.splitAfter(r),i=n.quotations(),o=(n=n.splitOn(i)).parentheses(),s=(n=n.splitOn(o)).if("#Copula #Adjective #Conjunction (#Pronoun|#Determiner) #Verb").match("#Conjunction"),a=(n=n.splitBefore(s)).if("if .{2,9} then .").match("then"),u=(n=(n=(n=(n=(n=(n=n.splitBefore(a)).splitBefore("as well as .")).splitBefore("such as .")).splitBefore("in addition to .")).splitAfter("@hasSemicolon")).splitAfter("@hasDash")).filter((function(t){return t.wordCount()>5&&t.match("#Verb+").length>=2}));if(u.found){var c=u.splitAfter("#Noun .* #Verb .* #Noun+");n=n.splitOn(c.eq(0))}return"number"==typeof e&&(n=n.get(e)),new t(n.list,this,this.world)},t},cn=function(t){var r=function(t){function r(t,n,i){var s;return e(this,r),(s=a(this,o(r).call(this,t,n,i))).contracted=null,s}return i(r,t),n(r,[{key:"expand",value:function(){return this.list.forEach((function(t){var e=t.terms(),r=e[0].isTitleCase();e.forEach((function(t,r){t.set(t.implicit||t.text),t.implicit=void 0,r<e.length-1&&""===t.post&&(t.post+=" ")})),r&&e[0].toTitleCase()})),this}}]),r}(t);return t.prototype.contractions=function(t){var e=this.match("@hasContraction+");return"number"==typeof t&&(e=e.get(t)),new r(e.list,this,this.world)},t.prototype.expanded=t.prototype.isExpanded,t.prototype.contracted=t.prototype.isContracted,t},ln=function(t){var r=function(t){var e=t.splitAfter("@hasComma").splitOn("(and|or) not?").not("(and|or) not?"),r=t.match("[.] (and|or)",0);return{things:e,conjunction:t.match("(and|or) not?"),beforeLast:r,hasOxford:r.has("@hasComma")}},s=function(t){function s(){return e(this,s),a(this,o(s).apply(this,arguments))}return i(s,t),n(s,[{key:"conjunctions",value:function(){return this.match("(and|or)")}},{key:"parts",value:function(){return this.splitAfter("@hasComma").splitOn("(and|or) not?")}},{key:"items",value:function(){return r(this).things}},{key:"add",value:function(t){return this.forEach((function(e){var n=r(e).beforeLast;n.append(t),n.termList(0).addPunctuation(",")})),this}},{key:"remove",value:function(t){return this.items().if(t).remove()}},{key:"hasOxfordComma",value:function(){return this.filter((function(t){return r(t).hasOxford}))}},{key:"addOxfordComma",value:function(){var t=this.items(),e=t.eq(t.length-2);return e.found&&!1===e.has("@hasComma")&&e.post(", "),this}},{key:"removeOxfordComma",value:function(){var t=this.items(),e=t.eq(t.length-2);return e.found&&!0===e.has("@hasComma")&&e.post(" "),this}}]),s}(t);return s.prototype.things=s.prototype.items,t.prototype.lists=function(t){var e=this.if("@hasComma+ .? (and|or) not? ."),r=e.match("(#Noun|#Adjective|#Determiner|#Article)+ #Conjunction not? (#Article|#Determiner)? #Adjective? #Noun+").if("#Noun"),n=e.match("(#Adjective|#Adverb)+ #Conjunction not? #Adverb? #Adjective+"),i=e.match("(#Verb|#Adverb)+ #Conjunction not? #Adverb? #Verb+"),o=r.concat(n);return o=(o=o.concat(i)).if("@hasComma"),"number"==typeof t&&(o=e.get(t)),new s(o.list,this,this.world)},t},hn=function(t){return!0===t.has("#Plural")||!0!==t.has("(#Pronoun|#Place|#Value|#Person|#Uncountable|#Month|#WeekDay|#Holiday|#Possessive)")},fn={hour:"an",heir:"an",heirloom:"an",honest:"an",honour:"an",honor:"an",uber:"an"},pn={a:!0,e:!0,f:!0,h:!0,i:!0,l:!0,m:!0,n:!0,o:!0,r:!0,s:!0,x:!0},dn=[/^onc?e/i,/^u[bcfhjkqrstn][aeiou]/i,/^eul/i],gn=function(t){if(t.has("#Person")||t.has("#Place"))return"";if(t.has("#Plural"))return"the";var e=t.text("normal").trim();if(fn.hasOwnProperty(e))return fn[e];var r=e.substr(0,1);if(t.has("^@isAcronym")&&pn.hasOwnProperty(r))return"an";for(var n=0;n<dn.length;n++)if(dn[n].test(e))return"a";return/^[aeiou]/i.test(e)?"an":"a"},vn={isSingular:[/(ax|test)is$/i,/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,/(octop|vir)i$/i,/(rl)f$/i,/(alias|status)$/i,/(bu)s$/i,/(al|ad|at|er|et|ed|ad)o$/i,/(ti)um$/i,/(ti)a$/i,/sis$/i,/(?:(^f)fe|(lr)f)$/i,/hive$/i,/(^aeiouy|qu)y$/i,/(x|ch|ss|sh|z)$/i,/(matr|vert|ind|cort)(ix|ex)$/i,/(m|l)ouse$/i,/(m|l)ice$/i,/(antenn|formul|nebul|vertebr|vit)a$/i,/.sis$/i,/^(?!talis|.*hu)(.*)man$/i],isPlural:[/(antenn|formul|nebul|vertebr|vit)ae$/i,/(octop|vir|radi|nucle|fung|cact|stimul)i$/i,/men$/i,/.tia$/i,/(m|l)ice$/i]},mn=/s$/,bn=function(t){return!vn.isSingular.find((function(e){return e.test(t)}))&&(!0===mn.test(t)||(!!vn.isPlural.find((function(e){return e.test(t)}))||null))},yn={he:"his",she:"hers",they:"theirs",we:"ours",i:"mine",you:"yours",her:"hers",their:"theirs",our:"ours",my:"mine",your:"yours"},$n=function(t){var e=t.text("text").trim();return yn.hasOwnProperty(e)?(t.replaceWith(yn[e],!0),void t.tag("Possessive","toPossessive")):/s$/.test(e)?(e+="'",t.replaceWith(e,!0),void t.tag("Possessive","toPossessive")):(e+="'s",t.replaceWith(e,!0),void t.tag("Possessive","toPossessive"))},wn=function(t){var e={main:t};if(t.has("#Noun (of|by|for) .")){var r=t.splitAfter("[#Noun+]",0);e.main=r.eq(0),e.post=r.eq(1)}return e},An={json:function(t){var e=null;"number"==typeof t&&(e=t,t=null),t=t||{text:!0,normal:!0,trim:!0,terms:!0};var r=[];return this.forEach((function(e){var n=e.json(t)[0];n.article=gn(e),r.push(n)})),null!==e?r[e]:r},adjectives:function(){var t=this.lookAhead("^(that|who|which)? (was|is|will)? be? #Adverb? #Adjective+");return(t=(t=t.concat(this.lookBehind("#Adjective+ #Adverb?$"))).match("#Adjective")).sort("index")},isPlural:function(){return this.if("#Plural")},hasPlural:function(){return this.filter((function(t){return hn(t)}))},toPlural:function(t){var e=this,r=this.world.transforms.toPlural;return this.forEach((function(n){if(!n.has("#Plural")&&!1!==hn(n)){var i=wn(n).main,o=i.text("reduced");if((i.has("#Singular")||!0!==bn(o))&&(o=r(o,e.world),i.replace(o).tag("#Plural"),t)){var s=i.lookBefore("(an|a) #Adjective?$").not("#Adjective");!0===s.found&&s.remove()}}})),this},toSingular:function(t){var e=this,r=this.world.transforms.toSingular;return this.forEach((function(n){if(!n.has("#Singular")&&!1!==hn(n)){var i=wn(n).main,o=i.text("reduced");if((i.has("#Plural")||!0===bn(o))&&(o=r(o,e.world),i.replace(o).tag("#Singular"),t)){var s=n,a=n.lookBefore("#Adjective");a.found&&(s=a);var u=gn(s);s.insertBefore(u)}}})),this},toPossessive:function(){return this.forEach((function(t){$n(t)})),this}},Pn=function(t){var r=function(t){function r(){return e(this,r),a(this,o(r).apply(this,arguments))}return i(r,t),r}(t);return Object.assign(r.prototype,An),t.prototype.nouns=function(t){var e=this.match("(#City && @hasComma) (#Region|#Country)"),n=this.not(e).splitAfter("@hasComma");return n=(n=(n=(n=(n=(n=(n=n.concat(e)).match("#Noun+ (of|by)? the? #Noun+?")).not("#Pronoun")).not("(there|these)")).not("(#Month|#WeekDay)")).not("(my|our|your|their|her|his)")).not("(of|for|by|the)$"),"number"==typeof t&&(n=n.get(t)),new r(n.list,this,this.world)},t},xn=/\(/,kn=/\)/,jn=function(t){var r=function(t){function r(){return e(this,r),a(this,o(r).apply(this,arguments))}return i(r,t),n(r,[{key:"unwrap",value:function(){return this.list.forEach((function(t){var e=t.terms(0);e.pre=e.pre.replace(xn,"");var r=t.lastTerm();r.post=r.post.replace(kn,"")})),this}}]),r}(t);return t.prototype.parentheses=function(t){var e=[];return this.list.forEach((function(t){for(var r=t.terms(),n=0;n<r.length;n+=1){var i=r[n];if(xn.test(i.pre))for(var o=n;o<r.length;o+=1)if(kn.test(r[o].post)){var s=o-n+1;e.push(t.buildFrom(i.id,s)),n=o;break}}})),"number"==typeof t?(e=e[t]?[e[t]]:[],new r(e,this,this.world)):new r(e,this,this.world)},t},On=function(t){var r=function(t){function r(t,n,i){var s;return e(this,r),(s=a(this,o(r).call(this,t,n,i))).contracted=null,s}return i(r,t),n(r,[{key:"strip",value:function(){return this.list.forEach((function(t){t.terms().forEach((function(t){var e=t.text.replace(/'s$/,"");t.set(e||t.text)}))})),this}}]),r}(t);return t.prototype.possessives=function(t){var e=this.match("#Noun+? #Possessive");return"number"==typeof t&&(e=e.get(t)),new r(e.list,this,this.world)},t},En={'"':'"',"＂":"＂","'":"'","“":"”","‘":"’","‟":"”","‛":"’","„":"”","⹂":"”","‚":"’","«":"»","‹":"›","‵":"′","‶":"″","‷":"‴","〝":"〞","`":"´","〟":"〞"},Cn=RegExp("("+Object.keys(En).join("|")+")"),_n=function(t,e){var r=t.verb,n=r.text("normal");if(r.has("#Infinitive"))return n;var i=null;return r.has("#PastTense")?i="PastTense":r.has("#Gerund")?i="Gerund":r.has("#PresentTense")?i="PresentTense":r.has("#Participle")?i="Participle":r.has("#Actor")&&(i="Actor"),e.transforms.toInfinitive(n,e,i)},Tn=function(t){var e=t.verb;if(e.has("(are|were|does)")||t.auxiliary.has("(are|were|does)"))return!0;if(e.has("(is|am|do|was)")||t.auxiliary.has("(is|am|do|was)"))return!1;var r=function(t){return t.lookBehind("#Noun+").last()}(e);return!!r.has("(we|they|you)")||(!!r.has("#Plural")||!r.has("#Singular")&&null)},Fn=function(t,e){var r=t.verb;if(!t.negative.found)if(t.auxiliary.found)t.auxiliary.eq(0).append("not");else if(r.has("(#Copula|will|has|had|do)"))r.append("not");else{if(r.has("#PastTense")){var n=_n(t,e);return r.replaceWith(n,!0),void r.prepend("did not")}if(r.has("#PresentTense")){var i=_n(t,e);return r.replaceWith(i,!0),void(Tn(t)?r.prepend("do not"):r.prepend("does not"))}if(r.has("#Gerund")){var o=_n(t,e);return r.replaceWith(o,!0),void r.prepend("not")}Tn(t)?r.prepend("does not"):r.prepend("do not")}},Nn=function(t){var e={adverb:t.match("#Adverb+"),negative:t.match("#Negative"),auxiliary:t.match("#Auxiliary").not("(#Negative|#Adverb)"),particle:t.match("#Particle"),verb:t.match("#Verb").not("(#Adverb|#Negative|#Auxiliary|#Particle)")};if(!e.verb.found)return Object.keys(e).forEach((function(t){e[t]=e[t].not(".")})),e.verb=t,e;if(e.adverb&&e.adverb.found){var r=e.adverb.text("reduced")+"$";t.has(r)&&(e.adverbAfter=!0)}return e},Vn=function(t){var e=!1,r=Tn(t),n=t.negative.found;t.verb.lookBehind("(i|we) (#Adverb|#Verb)?$").found&&(e=!0);var i={PastTense:"was",PresentTense:"is",FutureTense:"will be",Infinitive:"is",Gerund:"being",Actor:"",PerfectTense:"been",Pluperfect:"been"};return!0===e&&(i.PresentTense="am",i.Infinitive="am"),r&&(i.PastTense="were",i.PresentTense="are",i.Infinitive="are"),n&&(i.PastTense+=" not",i.PresentTense+=" not",i.FutureTense="will not be",i.Infinitive+=" not",i.PerfectTense="not "+i.PerfectTense,i.Pluperfect="not "+i.Pluperfect,i.Gerund="not "+i.Gerund),i},Sn=function(t,e){var r=t.verb;if(r.has("#Copula")||"be"===r.out("normal")&&t.auxiliary.has("will"))return Vn(t);var n=t.verb.termList(0).hasHyphen(),i=_n(t,e);if(!i)return{};var o=e.transforms.conjugate(i,e);if(o.Infinitive=i,t.particle.found){var s=t.particle.text(),a=!0===n?"-":" ";Object.keys(o).forEach((function(t){return o[t]+=a+s}))}if(t.adverb.found){var u=t.adverb.text(),c=!0===n?"-":" ";!0===t.adverbAfter?Object.keys(o).forEach((function(t){return o[t]+=c+u})):Object.keys(o).forEach((function(t){return o[t]=u+c+o[t]}))}var l=t.negative.found;return l&&(o.PastTense="did not "+o.Infinitive,o.PresentTense="does not "+o.Infinitive,o.Gerund="not "+o.Gerund),o.FutureTense||(o.FutureTense=l?"will not "+o.Infinitive:"will "+o.Infinitive),l&&(o.Infinitive="not "+o.Infinitive),o},zn={json:function(t){var e=this,r=null;"number"==typeof t&&(r=t,t=null),t=t||{text:!0,normal:!0,trim:!0,terms:!0};var n=[];return this.forEach((function(r){var i=r.json(t)[0],o=Nn(r);i.parts={},Object.keys(o).forEach((function(t){o[t]&&"Doc"===o[t].isA?i.parts[t]=o[t].text("normal"):i.parts[t]=o[t]})),i.isNegative=r.has("#Negative"),i.conjugations=Sn(o,e.world),n.push(i)})),null!==r?n[r]:n},adverbs:function(){var t=[];this.forEach((function(e){var r=Nn(e).adverb;r.found&&(t=t.concat(r.list))}));var e=this.lookBehind("#Adverb+$");return e.found&&(t=e.list.concat(t)),(e=this.lookAhead("^#Adverb+")).found&&(t=t.concat(e.list)),this.buildFrom(t)},isPlural:function(){var t=this,e=[];return this.forEach((function(r){var n=Nn(r);!0===Tn(n,t.world)&&e.push(r.list[0])})),this.buildFrom(e)},isSingular:function(){var t=this,e=[];return this.forEach((function(r){var n=Nn(r);!1===Tn(n,t.world)&&e.push(r.list[0])})),this.buildFrom(e)},conjugate:function(){var t=this,e=[];return this.forEach((function(r){var n=Nn(r),i=Sn(n,t.world);e.push(i)})),e},toPastTense:function(){var t=this;return this.forEach((function(e){var r=Nn(e),n=Sn(r,t.world).PastTense;n&&e.replaceWith(n,!1)})),this},toPresentTense:function(){var t=this;return this.forEach((function(e){var r=Nn(e),n=Sn(r,t.world),i=n.PresentTense;e.lookBehind("(i|we) (#Adverb|#Verb)?$").found&&(i=n.Infinitive),i&&(e.replaceWith(i,!1),e.tag("PresentTense"))})),this},toFutureTense:function(){var t=this;return this.forEach((function(e){var r=Nn(e),n=Sn(r,t.world).FutureTense;n&&(e.replaceWith(n,!1),e.tag("FutureTense"))})),this},toInfinitive:function(){var t=this;return this.forEach((function(e){var r=Nn(e),n=Sn(r,t.world).Infinitive;n&&(e.replaceWith(n,!1),e.tag("Infinitive"))})),this},toGerund:function(){var t=this;return this.forEach((function(e){var r=Nn(e),n=Sn(r,t.world).Gerund;n&&(e.replaceWith(n,!1),e.tag("Gerund"))})),this},isNegative:function(){return this.if("#Negative")},isPositive:function(){return this.ifNo("#Negative")},toNegative:function(){var t=this;return this.list.forEach((function(e){var r=t.buildFrom([e]),n=Nn(r);Fn(n,r.world)})),this},toPositive:function(){var t=this.match("do not #Verb");return t.found&&t.remove("do not"),this.remove("#Negative")}},Bn=[on,an,un,cn,ln,Pn,jn,On,function(t){var r=function(t){function r(){return e(this,r),a(this,o(r).apply(this,arguments))}return i(r,t),n(r,[{key:"unwrap",value:function(){return this}}]),r}(t);return t.prototype.quotations=function(t){var e=[];return this.list.forEach((function(t){for(var r=t.terms(),n=0;n<r.length;n+=1){var i=r[n];if(Cn.test(i.pre))for(var o=(i.pre.match(Cn)||[])[0],s=En[o],a=n;a<r.length;a+=1)if(-1!==r[a].post.indexOf(s)){var u=a-n+1;e.push(t.buildFrom(i.id,u)),n=a;break}}})),"number"==typeof t?(e=e[t]?[e[t]]:[],new r(e,this,this.world)):new r(e,this,this.world)},t.prototype.quotes=t.prototype.quotations,t},function(t){var r=function(t){function r(){return e(this,r),a(this,o(r).apply(this,arguments))}return i(r,t),r}(t);return Object.assign(r.prototype,zn),r.prototype.negate=r.prototype.toNegative,t.prototype.verbs=function(t){var e=this.match("(#Adverb|#Auxiliary|#Verb|#Negative|#Particle)+"),n=(e=(e=e.not("^#Adverb+")).not("#Adverb+$")).match("(#Adverb && @hasComma) #Adverb"),i=e.not(n).splitAfter("@hasComma");return(i=i.concat(n)).sort("index"),i=i.if("#Verb"),"number"==typeof t&&(i=i.get(t)),new r(i.list,this,this.world)},t},function(t){var r=function(t){function r(){return e(this,r),a(this,o(r).apply(this,arguments))}return i(r,t),r}(t);return t.prototype.people=function(t){var e=this.splitAfter("@hasComma");return e=e.match("#Person+"),"number"==typeof t&&(e=e.get(t)),new r(e.list,this,this.world)},t}],Dn=function(t){return Object.keys(Xr).forEach((function(e){return t.prototype[e]=Xr[e]})),Bn.forEach((function(e){return e(t)})),t},qn={misc:Yr,selections:Xr},In=function(){function t(r,n,i){var o=this;e(this,t),this.list=r,Object.defineProperty(this,"from",{enumerable:!1,value:n,writable:!0}),void 0===i&&void 0!==n&&(i=n.world),Object.defineProperty(this,"world",{enumerable:!1,value:i,writable:!0}),Object.defineProperty(this,"_cache",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"found",{get:function(){return o.list.length>0}}),Object.defineProperty(this,"length",{get:function(){return o.list.length}}),Object.defineProperty(this,"isA",{get:function(){return"Doc"}})}return n(t,[{key:"tagger",value:function(){return nn(this)}},{key:"pool",value:function(){return this.list.length>0?this.list[0].pool:this.all().list[0].pool}}]),t}();In.prototype.buildFrom=function(t){return t=t.map((function(t){return t.clone(!0)})),new In(t,this,this.world)},In.prototype.fromText=function(t){var e=ae(t,this.world,this.pool());return this.buildFrom(e)},Object.assign(In.prototype,qn.misc),Object.assign(In.prototype,qn.selections),Dn(In);var Ln={untag:"unTag",and:"match",notIf:"ifNo",only:"if",onlyIf:"if"};Object.keys(Ln).forEach((function(t){return In.prototype[t]=In.prototype[Ln[t]]}));var Mn=In;return function t(e){var r=e,n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;e&&r.addWords(e);var n=ae(t,r),i=new Mn(n,null,r);return i.tagger(),i};return n.tokenize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=r;e&&((n=n.clone()).words={},n.addWords(e));var i=ae(t,n),o=new Mn(i,null,n);return e&&nn(o),o},n.extend=function(t){return t(Mn,r,this,It,nt,Mt),this},n.fromJSON=function(t){var e=ue(t,r);return new Mn(e,null,r)},n.clone=function(){return t(r.clone())},n.verbose=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r.verbose(t),this},n.version="13.1.1",n.import=n.load,n}(new fr)}));
